(function(e){function t(t){for(var n,i,l=t[0],c=t[1],s=t[2],u=0,v=[];u<l.length;u++)i=l[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&v.push(o[i][0]),o[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(v.length)v.shift()();return r.push.apply(r,s||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,l=1;l<a.length;l++){var c=a[l];0!==o[c]&&(n=!1)}n&&(r.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},o={app:0},r=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var d=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[e.isLoggedin?[a("v-app-bar",{attrs:{color:"deep-purple accent-4",dark:"",app:"","hide-on-scroll":!1}},[a("v-app-bar-nav-icon",{on:{click:function(t){e.drawer=!0}}}),a("v-spacer"),a("v-btn",{attrs:{icon:""}},[a("v-icon",[e._v("mdi-barcode-scan")])],1),a("v-btn",{attrs:{icon:""}},[a("v-icon",[e._v("mdi-chart-arc")])],1)],1),a("v-navigation-drawer",{attrs:{app:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"text-h6"},[e._v(" "+e._s(e.basicInformation.nickname)+" ")]),a("v-list-item-subtitle",[e._v(" "+e._s(e.basicInformation.username)+" ")])],1)],1),a("v-divider")]},proxy:!0},{key:"append",fn:function(){return[a("div",{staticClass:"pa-4"},[a("v-btn",{staticClass:"my-2",attrs:{block:"",to:"/setting"}},[e._v(" Setting ")]),a("v-btn",{staticClass:"my-2",attrs:{block:"",color:"error"},on:{click:e.logout}},[e._v(" Logout ")])],1)]},proxy:!0}],null,!1,989714857),model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("Wallets")],1)]:e._e(),e.isReady?a("v-main",[a("v-container",{staticStyle:{height:"100%"},attrs:{fluid:""}},[a("router-view")],1),a("RecordModal"),e.isLoggedin?a("v-btn",{attrs:{color:"primary",bottom:"",right:"",fab:"",fixed:""},on:{click:e.openRecordModal}},[a("v-icon",[e._v("mdi-plus")])],1):e._e()],1):e._e()],2)},r=[],i=a("5530"),l=a("2f62"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-list",[e._l(e.wallets,(function(t,n){return[a("v-list-item",{key:t.wallet_id,attrs:{"three-line":t.selected}},[a("v-list-item-content",[t.selected?a("v-list-item-title",[e._v("目前錢包")]):e._e(),a("v-list-item-title",{staticClass:"text-h6 d-flex justify-space-between"},[a("span",[e._v(e._s(t.wallet_name))]),t.selected?a("span",[e._v("$"+e._s(t.wallet_total))]):e._e()]),t.selected?a("v-list-item-subtitle",[e._v(" "+e._s(t.wallet_description)+" ")]):e._e()],1),t.selected?e._e():a("v-list-item-action",[a("v-btn",{attrs:{icon:""}},[a("v-icon",{on:{click:function(a){return e.switchWallet(t.wallet_id)}}},[e._v("mdi-cached")])],1)],1)],1),t.selected?a("v-divider",{key:n}):e._e()]})),a("v-sheet",{staticClass:"pa-2"},[a("v-btn",{attrs:{block:"",color:"primary"},on:{click:e.createModal}},[e._v("新增錢包")])],1),a("WalletModal",{attrs:{mode:"create",open:e.walletDialogOpen},on:{handleDialogChange:e.handleWalletDialogChange}})],2)},s=[],d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center"},[a("v-dialog",{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",{staticClass:"d-flex flex-column",staticStyle:{overflow:"hidden"}},[a("v-toolbar",{attrs:{dark:"",flat:"",color:"primary"}},[a("v-toolbar-title",[e._v(e._s("edit"==e.mode?"修改":"新增")+"錢包")])],1),a("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-container",{staticClass:"flex-grow-1",staticStyle:{overflow:"auto"}},[a("v-text-field",{attrs:{label:"標題","prepend-icon":"mdi-format-title",required:"",rules:[function(e){return!!e||"請填入標題"}]},model:{value:e.data.wallet_name,callback:function(t){e.$set(e.data,"wallet_name",t)},expression:"data.wallet_name"}}),a("v-text-field",{attrs:{label:"備註","prepend-icon":"mdi-message-text"},model:{value:e.data.wallet_description,callback:function(t){e.$set(e.data,"wallet_description",t)},expression:"data.wallet_description"}})],1),a("v-card-actions",[a("v-row",{attrs:{justify:"end"}},[a("v-col",{attrs:{cols:"6"}},[a("v-btn",{attrs:{type:"submit",color:"primary",block:"",disabled:!e.valid}},[e._v(" "+e._s("edit"==e.mode?"修改":"新增")+" ")])],1)],1)],1)],1)],1)],1)],1)},u=[],v={props:{open:Boolean,mode:String,editingWallet:Object},name:"WalletModal",data:function(){return{valid:!0,data:{wallet_name:"",wallet_description:"",wallet_id:""}}},methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])({createWallet:"wallet/createWallet",editWallet:"wallet/editWallet"})),{},{handleSubmit:function(){var e=this;this.$refs.form.validate()&&("create"==this.mode?this.createWallet(this.data).then((function(){e.dialog=!1})):"edit"==this.mode&&this.editWallet(this.data).then((function(){e.dialog=!1})))}}),computed:{dialog:{get:function(){return this.open},set:function(e){this.$emit("handleDialogChange",e)}}},watch:{dialog:function(e){this.$refs.form&&this.$refs.form.resetValidation(),1==e&&("create"==this.mode?this.data={wallet_name:"",wallet_description:"",wallet_id:""}:"edit"==this.mode&&(this.data={wallet_name:this.editingWallet.wallet_name,wallet_description:this.editingWallet.wallet_description,wallet_id:this.editingWallet.wallet_id}))}}},p=v,f=a("2877"),m=a("6544"),h=a.n(m),g=a("8336"),_=a("b0af"),b=a("99d9"),w=a("62ad"),x=a("a523"),k=a("169a"),y=a("4bd4"),V=a("0fd9"),C=a("8654"),O=a("71d9"),D=a("2a7f"),T=Object(f["a"])(p,d,u,!1,null,null,null),j=T.exports;h()(T,{VBtn:g["a"],VCard:_["a"],VCardActions:b["a"],VCol:w["a"],VContainer:x["a"],VDialog:k["a"],VForm:y["a"],VRow:V["a"],VTextField:C["a"],VToolbar:O["a"],VToolbarTitle:D["a"]});var I={name:"Wallets",data:function(){return{walletDialogOpen:!1}},components:{WalletModal:j},mounted:function(){},methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])({deleteWallet:"wallet/deleteWallet",switchWallet:"wallet/switchWallet"})),{},{handleDialogChange:function(e){this.tagDialogOpen=e},handleWalletDialogChange:function(e){this.walletDialogOpen=e},createModal:function(){this.walletDialogOpen=!0}}),computed:Object(i["a"])({},Object(l["c"])({wallets:"auth/getWallets"}))},M=I,S=a("ce7e"),$=a("132d"),R=a("8860"),W=a("da13"),L=a("1800"),E=a("5d23"),P=a("8dd9"),A=Object(f["a"])(M,c,s,!1,null,null,null),F=A.exports;h()(A,{VBtn:g["a"],VDivider:S["a"],VIcon:$["a"],VList:R["a"],VListItem:W["a"],VListItemAction:L["a"],VListItemContent:E["a"],VListItemSubtitle:E["b"],VListItemTitle:E["c"],VSheet:P["a"]});var q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"500",scrollable:""},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",flat:"",color:"primary"},scopedSlots:e._u([{key:"extension",fn:function(){return[a("v-tabs",{attrs:{grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab",[e._v("收入")]),a("v-tab",[e._v("支出")])],1)]},proxy:!0}])},[a("v-toolbar-title",[e._v(e._s("create"==e.mode?"新增":"修改")+"帳目")])],1),a("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.sendRecord.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card-text",[a("v-text-field",{attrs:{label:"標題","prepend-icon":"mdi-format-title",required:"",rules:[function(e){return e&&e.length>0||"請填入標題"}]},model:{value:e.data.record_name,callback:function(t){e.$set(e.data,"record_name",t)},expression:"data.record_name"}}),a("v-menu",{ref:"record_date_picker",attrs:{"close-on-content-click":!1,"return-value":e.data.record_date,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){return e.$set(e.data,"record_date",t)},"update:return-value":function(t){return e.$set(e.data,"record_date",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,o=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"時間","prepend-icon":"mdi-calendar",readonly:"",required:"",rules:[function(e){return e&&e.length>0||"請填入時間"}]},model:{value:e.data.record_date,callback:function(t){e.$set(e.data,"record_date",t)},expression:"data.record_date"}},"v-text-field",o,!1),n))]}}]),model:{value:e.record_date_picker,callback:function(t){e.record_date_picker=t},expression:"record_date_picker"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.data.record_date,callback:function(t){e.$set(e.data,"record_date",t)},expression:"data.record_date"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.record_date_picker=!1}}},[e._v(" Cancel ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.record_date_picker.save(e.data.record_date)}}},[e._v(" OK ")])],1)],1),a("v-text-field",{attrs:{label:"金額",type:"number","prepend-icon":"mdi-currency-usd",required:"",rules:[function(e){return e&&!isNaN(parseFloat(e))||"請填入金額"}]},model:{value:e.data.record_amount,callback:function(t){e.$set(e.data,"record_amount",e._n(t))},expression:"data.record_amount"}}),a("v-dialog",{ref:"selectTagModal",attrs:{"return-value":e.data.wallet_record_tag_id,scrollable:"",persistent:"",width:"290px"},on:{"update:returnValue":function(t){return e.$set(e.data,"wallet_record_tag_id",t)},"update:return-value":function(t){return e.$set(e.data,"wallet_record_tag_id",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,o=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"標籤","prepend-icon":"mdi-tag",readonly:"",required:""},model:{value:e.selectedTagDisplay,callback:function(t){e.selectedTagDisplay=t},expression:"selectedTagDisplay"}},"v-text-field",o,!1),n))]}}]),model:{value:e.record_tag_selector,callback:function(t){e.record_tag_selector=t},expression:"record_tag_selector"}},[a("v-card",{staticClass:"d-flex flex-column"},[a("v-card-title",[e._v("選擇標籤")]),a("v-divider"),a("v-list-item-group",{attrs:{color:"primary",mandatory:""},model:{value:e.selectedTag,callback:function(t){e.selectedTag=t},expression:"selectedTag"}},e._l(e.walletTags,(function(t){return a("v-list-item",{key:t.tag_id},[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.tag_name))])],1)],1)})),1),a("v-card-actions",{staticClass:"justify-end"},[a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.$refs.selectTagModal.save(e.data.wallet_record_tag_id)}}},[e._v(" 確定 ")])],1)],1)],1),a("v-text-field",{attrs:{label:"備註","prepend-icon":"mdi-message-text"},model:{value:e.data.record_description,callback:function(t){e.$set(e.data,"record_description",t)},expression:"data.record_description"}})],1),a("v-container",[a("v-row",[a("v-col",["edit"==e.mode?a("v-btn",{attrs:{color:"error",block:""},on:{click:function(t){return e.deleteRecord(e.data)}}},[e._v(" 刪除 ")]):e._e()],1),a("v-col",[a("v-btn",{attrs:{type:"submit",color:"primary",block:"",disabled:!e.valid}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)},B=[],z=(a("ac1f"),a("1276"),a("7db0"),a("d3b7"),{name:"RecordDialog",data:function(){return{data:{record_amount:null,record_created_time:"",record_date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().split("T")[0],record_description:"",record_id:"",record_name:"",record_ordinary:1,record_type:"income",record_updated_time:"",wallet_record_tag_id:""},valid:!0,record_date_picker:!1,record_tag_selector:!1}},methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])({closeModal:"record/closeModal",createRecord:"record/createRecord",editRecord:"record/editRecord",deleteRecord:"record/deleteRecord",setData:"record/setData"})),{},{sendRecord:function(){this.$refs.form.validate()&&("create"==this.mode?this.createRecord(this.data):"edit"==this.mode&&this.editRecord(this.data))}}),computed:Object(i["a"])(Object(i["a"])({},Object(l["c"])({mode:"record/getMode",editData:"record/getData",_walletTags:"wallet/getWalletTags",calendarDate:"calendar/getDate"})),{},{walletTags:function(){return this._walletTags(this.data.record_type)},open:{get:function(){return this.$store.getters["record/getModal"]},set:function(e){1==e&&this.$store.dispatch("record/openModal"),0==e&&this.$store.dispatch("record/closeModal")}},tab:{get:function(){return"income"==this.data.record_type?0:"expense"==this.data.record_type?1:0},set:function(e){this.data.wallet_record_tag_id="",0==e?this.data.record_type="income":1==e&&(this.data.record_type="expense")}},selectedTag:{get:function(){return this.walletTags.indexOf(this.data.wallet_record_tag_id)},set:function(e){var t;this.data.wallet_record_tag_id=null!==(t=this.walletTags[e])&&void 0!==t&&t.tag_id?this.walletTags[e].tag_id:""}},selectedTagDisplay:{get:function(){var e,t=this;return null===(e=this.walletTags.find((function(e){return e.tag_id==t.data.wallet_record_tag_id})))||void 0===e?void 0:e.tag_name},set:function(){}}}),watch:{"data.record_type":function(){var e;this.data.wallet_record_tag_id=null===(e=this.walletTags[0])||void 0===e?void 0:e.tag_id},open:function(e){var t;1==e?(this.$refs.form&&this.$refs.form.resetValidation(),"create"==this.mode?this.data={record_amount:null,record_created_time:"",record_date:new Date(this.calendarDate-6e4*this.calendarDate.getTimezoneOffset()).toISOString().split("T")[0],record_description:"",record_id:"",record_name:"",record_ordinary:1,record_type:"income",record_updated_time:"",wallet_record_tag_id:null===(t=this.walletTags[0])||void 0===t?void 0:t.tag_id}:"edit"==this.mode&&(this.data=Object.assign({},this.editData),this.data.record_date=new Date(new Date(this.data.record_date)-6e4*new Date(this.data.record_date).getTimezoneOffset()).toISOString().split("T")[0])):this.setData(new Object)}}}),H=z,G=a("2e4b"),N=a("1baa"),Z=a("e449"),J=a("2fa4"),K=a("71a3"),U=a("fe57"),Y=Object(f["a"])(H,q,B,!1,null,null,null),Q=Y.exports;h()(Y,{VBtn:g["a"],VCard:_["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:w["a"],VContainer:x["a"],VDatePicker:G["a"],VDialog:k["a"],VDivider:S["a"],VForm:y["a"],VListItem:W["a"],VListItemContent:E["a"],VListItemGroup:N["a"],VListItemTitle:E["c"],VMenu:Z["a"],VRow:V["a"],VSpacer:J["a"],VTab:K["a"],VTabs:U["a"],VTextField:C["a"],VToolbar:O["a"],VToolbarTitle:D["a"]});var X={name:"App",data:function(){return{route:"Home",drawer:!1}},components:{RecordModal:Q,Wallets:F},mounted:function(){this.login()},methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])({login:"auth/login",logout:"auth/logout",openModal:"record/openModal",switchCreateMode:"record/createMode"})),{},{openRecordModal:function(){this.openModal(),this.switchCreateMode()}}),computed:Object(i["a"])({},Object(l["c"])({isLoggedin:"auth/isLoggedin",isReady:"auth/isReady",basicInformation:"auth/basicInformation",walletDetail:"wallet/getWalletDetail"})),watch:{isLoggedin:function(){if(!this.isLoggedin)return this.$router.push({path:"/login",replace:!0})}}},ee=X,te=(a("034f"),a("7496")),ae=a("40dc"),ne=a("5bc1"),oe=a("f6c4"),re=a("f774"),ie=Object(f["a"])(ee,o,r,!1,null,null,null),le=ie.exports;h()(ie,{VApp:te["a"],VAppBar:ae["a"],VAppBarNavIcon:ne["a"],VBtn:g["a"],VContainer:x["a"],VDivider:S["a"],VIcon:$["a"],VListItem:W["a"],VListItemContent:E["a"],VListItemSubtitle:E["b"],VListItemTitle:E["c"],VMain:oe["a"],VNavigationDrawer:re["a"],VSpacer:J["a"]});var ce=a("8c4f"),se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-sheet",[a("Calendar",{staticClass:"pa-1"}),a("v-expansion-panels",{staticClass:"pa-1",attrs:{accordion:""}},e._l(e.getTodaysRecords,(function(t){return a("v-expansion-panel",{key:t.record_id},[a("v-expansion-panel-header",{scopedSlots:e._u([{key:"actions",fn:function(){return[a("span",[e._v(e._s("expense"==t.record_type?"-":"")+e._s(t.record_amount))])]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.record_name)+" ")]),a("v-expansion-panel-content",[a("ul",{staticClass:"pb-3"},e._l(Object.keys(t),(function(n){return a("li",{key:n},[e._v(" "+e._s(n)+": "+e._s(t[n])+" ")])})),0),a("v-row",[a("v-col",[a("v-btn",{attrs:{color:"primary",block:""},on:{click:function(a){return e.openRecordModal(t)}}},[e._v("修改")])],1),a("v-col",[a("v-btn",{attrs:{color:"error",block:""},on:{click:function(a){return e.deleteRecord(t)}}},[e._v("刪除")])],1)],1)],1)],1)})),1)],1)},de=[],ue=(a("4de4"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("vc-date-picker",{attrs:{"is-expanded":"","is-required":""},on:{"update:to-page":e.toPage},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)}),ve=[],pe={name:"Home",data:function(){return{}},mounted:function(){},methods:{toPage:function(e){e.month==this.date.getMonth()+1&&e.year==this.date.getFullYear()||(this.date=new Date(new Date(this.date.setMonth(e.month-1)).setFullYear(e.year)))}},computed:{date:{get:function(){return this.$store.getters["calendar/getDate"]},set:function(e){this.$store.dispatch("calendar/setDate",e)}}}},fe=pe,me=Object(f["a"])(fe,ue,ve,!1,null,null,null),he=me.exports,ge={name:"Home",data:function(){return{}},components:{Calendar:he},mounted:function(){},methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])({deleteRecord:"record/deleteRecord",openModal:"record/openModal",switchEditMode:"record/editMode",setData:"record/setData"})),{},{openRecordModal:function(e){this.openModal(),this.switchEditMode(),this.setData(e)}}),computed:Object(i["a"])(Object(i["a"])({},Object(l["c"])({currentDate:"calendar/getDate",records:"wallet/getRecords"})),{},{getTodaysRecords:function(){var e=this;return this.records.filter((function(t){var a=new Date(t.record_date),n=new Date(e.currentDate);return a.setHours(0,0,0,0)==n.setHours(0,0,0,0)}))}})},_e=ge,be=a("cd55"),we=a("49e2"),xe=a("c865"),ke=a("0393"),ye=Object(f["a"])(_e,se,de,!1,null,null,null),Ve=ye.exports;h()(ye,{VBtn:g["a"],VCol:w["a"],VExpansionPanel:be["a"],VExpansionPanelContent:we["a"],VExpansionPanelHeader:xe["a"],VExpansionPanels:ke["a"],VRow:V["a"],VSheet:P["a"]});var Ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{staticClass:"fill-height"},[a("v-col",[a("v-sheet",{attrs:{height:"64"}},[a("v-toolbar",{attrs:{flat:""}},[a("v-btn",{staticClass:"mr-4",attrs:{outlined:"",color:"grey darken-2"},on:{click:e.setToday}},[e._v(" Today ")]),a("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.prev}},[a("v-icon",{attrs:{small:""}},[e._v(" mdi-chevron-left ")])],1),a("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.next}},[a("v-icon",{attrs:{small:""}},[e._v(" mdi-chevron-right ")])],1),e.$refs.calendar?a("v-toolbar-title",[e._v(" "+e._s(e.$refs.calendar.title)+" ")]):e._e(),a("v-spacer"),a("v-menu",{attrs:{bottom:"",right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,o=t.attrs;return[a("v-btn",e._g(e._b({attrs:{outlined:"",color:"grey darken-2"}},"v-btn",o,!1),n),[a("span",[e._v(e._s(e.typeToLabel[e.type]))]),a("v-icon",{attrs:{right:""}},[e._v(" mdi-menu-down ")])],1)]}}])},[a("v-list",[a("v-list-item",{on:{click:function(t){e.type="day"}}},[a("v-list-item-title",[e._v("Day")])],1),a("v-list-item",{on:{click:function(t){e.type="week"}}},[a("v-list-item-title",[e._v("Week")])],1),a("v-list-item",{on:{click:function(t){e.type="month"}}},[a("v-list-item-title",[e._v("Month")])],1),a("v-list-item",{on:{click:function(t){e.type="4day"}}},[a("v-list-item-title",[e._v("4 days")])],1)],1)],1)],1)],1),a("v-sheet",{attrs:{height:"600"}},[a("v-calendar",{ref:"calendar",attrs:{color:"primary",events:e.events,"event-color":e.getEventColor,type:e.type},on:{"click:event":e.showEvent,"click:more":e.viewDay,"click:date":e.viewDay,change:e.updateRange},model:{value:e.focus,callback:function(t){e.focus=t},expression:"focus"}}),a("v-menu",{attrs:{"close-on-content-click":!1,activator:e.selectedElement,"offset-x":""},model:{value:e.selectedOpen,callback:function(t){e.selectedOpen=t},expression:"selectedOpen"}},[a("v-card",{attrs:{color:"grey lighten-4","min-width":"350px",flat:""}},[a("v-toolbar",{attrs:{color:e.selectedEvent.color,dark:""}},[a("v-btn",{attrs:{icon:""}},[a("v-icon",[e._v("mdi-pencil")])],1),a("v-toolbar-title",{domProps:{innerHTML:e._s(e.selectedEvent.name)}}),a("v-spacer"),a("v-btn",{attrs:{icon:""}},[a("v-icon",[e._v("mdi-heart")])],1),a("v-btn",{attrs:{icon:""}},[a("v-icon",[e._v("mdi-dots-vertical")])],1)],1),a("v-card-text",[a("span",{domProps:{innerHTML:e._s(e.selectedEvent.details)}},[e._v("tester")])]),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"secondary"},on:{click:function(t){e.selectedOpen=!1}}},[e._v(" Cancel ")])],1)],1)],1)],1)],1)],1)},Oe=[],De={data:function(){return{focus:"",type:"month",typeToLabel:{month:"Month",week:"Week",day:"Day","4day":"4 Days"},selectedEvent:{},selectedElement:null,selectedOpen:!1,events:[],colors:["blue","indigo","deep-purple","cyan","green","orange","grey darken-1"],names:["Meeting","Holiday","PTO","Travel","Event","Birthday","Conference","Party"]}},mounted:function(){this.$refs.calendar.checkChange()},methods:{viewDay:function(e){var t=e.date;this.focus=t,this.type="day"},getEventColor:function(e){return e.color},setToday:function(){this.focus=""},prev:function(){this.$refs.calendar.prev()},next:function(){this.$refs.calendar.next()},showEvent:function(e){var t=this,a=e.nativeEvent,n=e.event,o=function(){t.selectedEvent=n,t.selectedElement=a.target,requestAnimationFrame((function(){return requestAnimationFrame((function(){return t.selectedOpen=!0}))}))};this.selectedOpen?(this.selectedOpen=!1,requestAnimationFrame((function(){return requestAnimationFrame((function(){return o()}))}))):o(),a.stopPropagation()},updateRange:function(e){for(var t=e.start,a=e.end,n=[],o=new Date("".concat(t.date,"T00:00:00")),r=new Date("".concat(a.date,"T23:59:59")),i=(r.getTime()-o.getTime())/864e5,l=this.rnd(i,i+20),c=0;c<l;c++){var s=0===this.rnd(0,3),d=this.rnd(o.getTime(),r.getTime()),u=new Date(d-d%9e5),v=9e5*this.rnd(2,s?288:8),p=new Date(u.getTime()+v);n.push({name:this.names[this.rnd(0,this.names.length-1)],start:u,end:p,color:this.colors[this.rnd(0,this.colors.length-1)],timed:!s})}this.events=n},rnd:function(e,t){return Math.floor((t-e+1)*Math.random())+e}}},Te=De,je=a("a4f6"),Ie=Object(f["a"])(Te,Ce,Oe,!1,null,null,null),Me=Ie.exports;h()(Ie,{VBtn:g["a"],VCalendar:je["a"],VCard:_["a"],VCardActions:b["a"],VCardText:b["c"],VCol:w["a"],VIcon:$["a"],VList:R["a"],VListItem:W["a"],VListItemTitle:E["c"],VMenu:Z["a"],VRow:V["a"],VSheet:P["a"],VSpacer:J["a"],VToolbar:O["a"],VToolbarTitle:D["a"]});var Se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.desserts,"sort-by":"prices"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[e._v("記帳清單")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,o=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",o,!1),n),[e._v(" 新增項目 ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"名稱"},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"價格"},model:{value:e.editedItem.prices,callback:function(t){e.$set(e.editedItem,"prices",t)},expression:"editedItem.prices"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"敘述"},model:{value:e.editedItem.desc,callback:function(t){e.$set(e.editedItem,"desc",t)},expression:"editedItem.desc"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v(" 取消 ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v(" 儲存 ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"font-weight-bold"},[e._v("確定要刪除此項目嗎？")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("取消")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("確定")]),a("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var n=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(n)}}},[e._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(n)}}},[e._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v(" Reset ")])]},proxy:!0}])})},$e=[],Re=(a("159b"),a("a434"),{data:function(){return{dialog:!1,dialogDelete:!1,headers:[{text:"項目",align:"start",sortable:!1,value:"name"},{text:"價格",value:"prices"},{text:"描述",align:"start",sortable:!1,value:"desc"},{text:"動作",value:"actions",sortable:!1}],desserts:[],editedIndex:-1,editedItem:{name:"",prices:0,desc:""},defaultItem:{name:"",prices:0,desc:""}}},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"},totalItem:function(){var e=0;return this.items.forEach((function(t){e+=parseFloat(t.price)*parseFloat(t.quantity)})),e}},watch:{dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()}},created:function(){this.initialize()},methods:{initialize:function(){this.desserts=[{name:"吐司夾蛋",prices:159,desc:""},{name:"冰紅茶",prices:237,desc:"好喝"},{name:"英文講義",prices:262,desc:"for英文通識"},{name:"立可帶",prices:305,desc:""},{name:"泡麵",prices:356,desc:""},{name:"公車費",prices:375,desc:""},{name:"活動保證金",prices:392,desc:"社團：GDSC"},{name:"便當",prices:408,desc:""}]},editItem:function(e){this.editedIndex=this.desserts.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.editedIndex=this.desserts.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm:function(){this.desserts.splice(this.editedIndex,1),this.closeDelete()},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},save:function(){this.editedIndex>-1?Object.assign(this.desserts[this.editedIndex],this.editedItem):this.desserts.push(this.editedItem),this.close()}}}),We=Re,Le=a("8fea"),Ee=Object(f["a"])(We,Se,$e,!1,null,null,null),Pe=Ee.exports;h()(Ee,{VBtn:g["a"],VCard:_["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:w["a"],VContainer:x["a"],VDataTable:Le["a"],VDialog:k["a"],VDivider:S["a"],VIcon:$["a"],VRow:V["a"],VSpacer:J["a"],VTextField:C["a"],VToolbar:O["a"],VToolbarTitle:D["a"]});var Ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-sheet",[a("v-toolbar",{staticClass:"mb-3",attrs:{flat:""}},[a("v-btn",{attrs:{icon:"",to:"/"}},[a("v-icon",[e._v("mdi-home")])],1),a("v-toolbar-title",[e._v("設定")])],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("p",[e._v("使用者設定")]),a("v-card",{staticClass:"mx-1"},[a("v-card-title",[e._v(e._s(e.basicInformation.nickname))]),a("v-card-subtitle",[e._v(e._s(e.basicInformation.username))])],1)],1),a("v-col",{attrs:{cols:"12"}},[a("p",[e._v("錢包設定")]),a("v-card",{staticClass:"mx-1"},[a("v-card-title",{staticClass:"text-h6 d-flex justify-space-between"},[a("span",[e._v(e._s(e.getWalletInfo.wallet_name))]),a("span",[e._v("$"+e._s(e.getWalletInfo.wallet_total))])]),a("v-card-subtitle",[e._v(e._s(e.getWalletInfo.wallet_description))]),a("v-container",[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"4"}},[a("v-btn",{attrs:{block:""},on:{click:function(t){return e.handleDialogChange(!0)}}},[e._v("編輯標籤")])],1),a("v-col",{attrs:{cols:"4"}},[a("v-btn",{attrs:{color:"info",block:""},on:{click:function(t){return e.editModal(e.getWalletInfo)}}},[e._v("編輯錢包")])],1),a("v-col",{attrs:{cols:"4"}},[a("v-btn",{attrs:{color:"error",block:""},on:{click:function(t){return e.deleteWallet(e.getWalletInfo.wallet_id)}}},[e._v("刪除錢包")])],1)],1)],1)],1)],1)],1),a("WalletModal",{attrs:{mode:"edit",open:e.walletDialogOpen,editingWallet:e.edittingWallet},on:{handleDialogChange:e.handleWalletDialogChange}}),a("TagModal",{attrs:{open:e.tagDialogOpen},on:{handleChange:e.handleDialogChange}})],1)},Fe=[],qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{scrollable:"","max-width":"500"},model:{value:e.dialogOpen,callback:function(t){e.dialogOpen=t},expression:"dialogOpen"}},[a("v-card",{staticClass:"d-flex flex-column",staticStyle:{overflow:"hidden"}},[a("v-toolbar",{attrs:{dark:"",flat:"",color:"primary"},scopedSlots:e._u([{key:"extension",fn:function(){return[a("v-tabs",{attrs:{grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab",[e._v("收入")]),a("v-tab",[e._v("支出")])],1)]},proxy:!0}])},[a("v-toolbar-title",[e._v("編輯標籤")])],1),a("v-container",{staticClass:"flex-grow-1",staticStyle:{overflow:"auto"}},[a("v-tabs-items",{attrs:{touchless:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab-item",[a("DraggableTag",{attrs:{list:e.incomeList},on:{handleChange:e.handleIncomeChange}})],1),a("v-tab-item",[a("DraggableTag",{attrs:{list:e.expenseList},on:{handleChange:e.handleExpenseChange}})],1)],1)],1),a("v-card-actions",[a("v-row",[a("v-col",[a("v-btn",{attrs:{color:"success",block:""},on:{click:function(t){return e.handleDialogChange(!0)}}},[e._v("新增標籤")])],1),a("v-col",[a("v-btn",{attrs:{color:"primary",block:""},on:{click:e.updateTag}},[e._v("儲存")])],1)],1)],1)],1),a("CreateModal",{attrs:{open:e.createModalOpen},on:{handleChange:e.handleDialogChange}})],1)},Be=[],ze=(a("d81d"),a("99af"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("draggable",e._b({staticClass:"list-group",attrs:{tag:"div",handle:".handle"},on:{start:function(t){e.drag=!0},end:function(t){e.drag=!1}},model:{value:e.renderList,callback:function(t){e.renderList=t},expression:"renderList"}},"draggable",e.dragOptions,!1),[a("transition-group",{attrs:{type:"transition",name:e.drag?null:"flip-list"}},e._l(e.renderList,(function(t){return a("v-sheet",{key:t.tag_id,staticClass:"list-group-item pa-1"},[a("v-card",[a("v-card-title",{staticClass:"d-flex justify-space-between align-content-center"},[a("span",[a("v-icon",{staticClass:"handle"},[e._v("mdi-drag")]),e._v(" "+e._s(t.tag_name)+" ")],1),a("span",[a("v-icon",{staticClass:"px-2",attrs:{color:t.tag_color}},[e._v("mdi-circle")]),a("v-btn",{attrs:{icon:""}},[a("v-icon",[e._v("mdi-pencil")])],1),a("v-btn",{attrs:{icon:"",color:"error"},on:{click:function(a){return e.deleteTag(t)}}},[a("v-icon",[e._v("mdi-delete")])],1)],1)])],1)],1)})),1)],1)}),He=[],Ge=a("b76a"),Ne=a.n(Ge),Ze={name:"transition-example-2",props:{list:Array},data:function(){return{dragOptions:{animation:200,group:"description",disabled:!1,ghostClass:"ghost"},drag:!1}},components:{draggable:Ne.a},methods:{deleteTag:function(e){this.renderList=this.renderList.filter((function(t){return t.tag_id!=e.tag_id}))}},computed:{renderList:{get:function(){return this.list},set:function(e){this.$emit("handleChange",e)}}}},Je=Ze,Ke=(a("95a2"),Object(f["a"])(Je,ze,He,!1,null,null,null)),Ue=Ke.exports;h()(Ke,{VBtn:g["a"],VCard:_["a"],VCardTitle:b["d"],VIcon:$["a"],VSheet:P["a"]});var Ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{scrollable:"","max-width":"500"},model:{value:e.dialogOpen,callback:function(t){e.dialogOpen=t},expression:"dialogOpen"}},[a("v-card",{staticClass:"d-flex flex-column",staticStyle:{overflow:"hidden"}},[a("v-container",{staticClass:"flex-grow-1",staticStyle:{overflow:"auto"}},[a("v-card",[a("v-card-title",[a("v-text-field",{staticClass:"flex-grow-1",attrs:{label:"標籤名稱",dense:"","hide-details":"auto",outlined:""}}),a("v-dialog",{ref:"colorPicker",attrs:{"return-value":e.data.color,width:"290px"},on:{"update:returnValue":function(t){return e.$set(e.data,"color",t)},"update:return-value":function(t){return e.$set(e.data,"color",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,o=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",o,!1),n),[a("v-icon",{staticClass:"px-4",attrs:{color:e.data.color}},[e._v("mdi-circle")])],1)]}}]),model:{value:e.coloPicker,callback:function(t){e.coloPicker=t},expression:"coloPicker"}},[e.coloPicker?a("v-color-picker",{attrs:{"dot-size":"25","swatches-max-height":"200","full-width":""},model:{value:e.data.color,callback:function(t){e.$set(e.data,"color",t)},expression:"data.color"}}):e._e(),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.coloPicker=!1}}},[e._v(" Cancel ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.colorPicker.save(e.data.color)}}},[e._v(" OK ")])],1)],1)],1)],1),a("v-card-actions",[a("v-row",[a("v-col",[a("v-btn",{attrs:{color:"primary",block:""}},[e._v("儲存")])],1)],1)],1)],1)],1)},Qe=[],Xe={name:"RecordDialog",props:{open:Boolean},data:function(){return{data:{name:"",color:"#FFFFFF"},coloPicker:!1}},mounted:function(){},methods:{},computed:{dialogOpen:{get:function(){return this.open},set:function(e){this.$emit("handleChange",e)}}}},et=Xe,tt=a("03a4"),at=Object(f["a"])(et,Ye,Qe,!1,null,null,null),nt=at.exports;h()(at,{VBtn:g["a"],VCard:_["a"],VCardActions:b["a"],VCardTitle:b["d"],VCol:w["a"],VColorPicker:tt["a"],VContainer:x["a"],VDialog:k["a"],VIcon:$["a"],VRow:V["a"],VTextField:C["a"]});var ot={name:"RecordDialog",props:{open:Boolean},data:function(){return{incomeList:[],expenseList:[],type:"income",createModalOpen:!1}},components:{DraggableTag:Ue,CreateModal:nt},mounted:function(){this.initialize()},methods:{initialize:function(){this.incomeList=this.tags("income").map((function(e){return Object.assign({},e)})),this.expenseList=this.tags("expense").map((function(e){return Object.assign({},e)}))},handleIncomeChange:function(e){this.incomeList=e},handleExpenseChange:function(e){this.expenseList=e},handleDialogChange:function(e){this.createModalOpen=e},updateTag:function(){console.log(this.tagList)}},computed:Object(i["a"])(Object(i["a"])({},Object(l["c"])({tags:"wallet/getWalletTags"})),{},{dialogOpen:{get:function(){return 1==this.open&&this.initialize(),this.open},set:function(e){this.$emit("handleChange",e)}},tab:{get:function(){return"income"==this.type?0:"expense"==this.type?1:0},set:function(e){0==e?this.type="income":1==e&&(this.type="expense")}},tagList:function(){return this.expenseList.concat(this.incomeList)}})},rt=ot,it=a("c671"),lt=a("aac8"),ct=Object(f["a"])(rt,qe,Be,!1,null,null,null),st=ct.exports;h()(ct,{VBtn:g["a"],VCard:_["a"],VCardActions:b["a"],VCol:w["a"],VContainer:x["a"],VDialog:k["a"],VRow:V["a"],VTab:K["a"],VTabItem:it["a"],VTabs:U["a"],VTabsItems:lt["a"],VToolbar:O["a"],VToolbarTitle:D["a"]});var dt={name:"Setting",data:function(){return{tagDialogOpen:!1,walletDialogOpen:!1,edittingWallet:null}},components:{WalletModal:j,TagModal:st},mounted:function(){},methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])({deleteWallet:"wallet/deleteWallet"})),{},{handleDialogChange:function(e){this.tagDialogOpen=e},handleWalletDialogChange:function(e){this.walletDialogOpen=e},editModal:function(e){this.edittingWallet=e,this.walletDialogOpen=!0}}),computed:Object(i["a"])({},Object(l["c"])({basicInformation:"auth/basicInformation",getWalletInfo:"wallet/getWalletInfo"}))},ut=dt,vt=Object(f["a"])(ut,Ae,Fe,!1,null,null,null),pt=vt.exports;h()(vt,{VBtn:g["a"],VCard:_["a"],VCardSubtitle:b["b"],VCardTitle:b["d"],VCol:w["a"],VContainer:x["a"],VIcon:$["a"],VRow:V["a"],VSheet:P["a"],VToolbar:O["a"],VToolbarTitle:D["a"]});var ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-sheet",{staticClass:"d-flex flex-column justify-center",staticStyle:{height:"100%"}},[a("v-sheet",{staticClass:"d-flex justify-center"},[a("v-card",{attrs:{width:"100%","max-width":"500px"}},[a("v-card-title",[e._v("Wallet")]),a("v-card-actions",[a("v-row",{attrs:{justify:"end"}},[a("v-col",{attrs:{cols:"6"}},[a("v-btn",{attrs:{href:"https://wallet.ebg.tw/oauth/google/login",color:"primary",block:""}},[a("v-icon",{attrs:{small:"",left:""}},[e._v("mdi-google")]),e._v(" login ")],1)],1)],1)],1)],1)],1)],1)},mt=[],ht={name:"Home",data:function(){return{}},mounted:function(){if(this.isLoggedin)return this.$router.push({path:"/",replace:!0})},methods:{},computed:Object(i["a"])({},Object(l["c"])({isLoggedin:"auth/isLoggedin"})),watch:{isLoggedin:function(){if(this.isLoggedin)return this.$router.push({path:"/",replace:!0})}}},gt=ht,_t=Object(f["a"])(gt,ft,mt,!1,null,null,null),bt=_t.exports;h()(_t,{VBtn:g["a"],VCard:_["a"],VCardActions:b["a"],VCardTitle:b["d"],VCol:w["a"],VIcon:$["a"],VRow:V["a"],VSheet:P["a"]});var wt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-sheet",{staticClass:"d-flex flex-column justify-center",attrs:{height:"100%"}},[a("v-sheet",{staticClass:"d-flex justify-center"},[a("v-card",{attrs:{width:"100%","max-width":"500px"}},[a("v-card-title",[e._v("剩下最後一步，填寫你的暱稱吧")]),a("v-card-text",[a("v-text-field",{attrs:{label:"暱稱",placeholder:"暱稱"},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}})],1),a("v-card-actions",[a("v-row",{attrs:{justify:"end"}},[a("v-col",{attrs:{cols:"6"}},[a("v-btn",{attrs:{block:"",color:"primary"},on:{click:function(t){return e.signup({jwt:e.jwt,nickname:e.nickname})}}},[e._v("註冊")])],1)],1)],1)],1)],1)],1)},xt=[],kt=(a("5319"),{name:"CallbackSignup",data:function(){return{jwt:"",nickname:""}},mounted:function(){if(!this.$route.query.token)return this.$router.push({path:"/login",replace:!0});this.jwt=this.$route.query.token,this.$router.replace("/callback/signup")},methods:Object(i["a"])({},Object(l["b"])({signup:"auth/signup"})),computed:{}}),yt=kt,Vt=Object(f["a"])(yt,wt,xt,!1,null,null,null),Ct=Vt.exports;h()(Vt,{VBtn:g["a"],VCard:_["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:w["a"],VRow:V["a"],VSheet:P["a"],VTextField:C["a"]});var Ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("pending...")])},Dt=[],Tt={name:"CallbackLogin",data:function(){return{}},mounted:function(){var e=this;if(!this.$route.query.token)return this.$router.push({path:"/callback/login",replace:!0});localStorage.setItem("authToken",this.$route.query.token),this.login().then((function(){e.$router.replace("/login")}))},methods:Object(i["a"])({},Object(l["b"])({login:"auth/login"})),computed:{}},jt=Tt,It=Object(f["a"])(jt,Ot,Dt,!1,null,null,null),Mt=It.exports,St=a("1da1"),$t=(a("96cf"),a("d9e2"),a("4e827"),a("bc3a")),Rt=a.n($t);Rt.a.defaults.baseURL="",Rt.a.defaults.headers.post["Content-Type"]="application/json";var Wt=function(e,t,a){var n="Bearer "+(localStorage.getItem("authToken")?localStorage.getItem("authToken"):"");if(void 0!==a)var o=a.params,r=void 0===o?{}:o,i=a.data,l=void 0===i?{}:i;else r=l=null;return new Promise((function(a,o){Rt()({url:e,method:t,params:r,data:l,headers:{Authorization:n}}).then((function(e){a(e)}),(function(e){o(e)}))}))},Lt=Wt,Et={namespaced:!0,state:{authToken:"",profile:null,isAuthenticated:!1},mutations:{setAuthToken:function(e,t){e.authToken=t},setProfile:function(e,t){e.profile=t},authenticateSuccess:function(e){e.isAuthenticated=!0},authenticateFail:function(e){e.isAuthenticated=!1},logout:function(e){e.authToken="",e.profile={},e.isAuthenticated=!1}},actions:{login:function(e){var t=e.commit,a=e.dispatch;t("logout"),t("setProfile",null),t("setAuthToken",localStorage.getItem("authToken")),a("getProfile")},getProfile:function(e){return Object(St["a"])(regeneratorRuntime.mark((function t(){var a,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,n=e.rootGetters,o=n["calendar/getDate"],Lt("/api/user/profile","get",{params:{time_choosen:new Date(o).toISOString().split("Z")[0]}}).then((function(e){var t;if(null===(t=e.data)||void 0===t||!t.success)throw new Error(e.data);a("setProfile",e.data.data),a("wallet/setWallet",e.data.data.wallets.find((function(t){return t.wallet_id==e.data.data.selected_wallet_id})),{root:!0}),a("authenticateSuccess")})).catch((function(e){console.log(e),a("logout")}));case 3:case"end":return t.stop()}}),t)})))()},signup:function(e,t){return Object(St["a"])(regeneratorRuntime.mark((function a(){var n,o,r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,o=e.dispatch,r=t.jwt,i=t.nickname,localStorage.setItem("authToken",r),Lt("/api/user/signup","post",{data:{nickname:i}}).then((function(e){var t;if(null===(t=e.data)||void 0===t||!t.success)throw new Error(e.data);o("login")})).catch((function(e){console.log(e),n("logout")}));case 4:case"end":return a.stop()}}),a)})))()},logout:function(e){return Object(St["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,localStorage.clear("authToken"),a("logout");case 3:case"end":return t.stop()}}),t)})))()}},getters:{isLoggedin:function(e){return e.isAuthenticated},isReady:function(e){return null!=e.profile},basicInformation:function(e){var t,a;return{nickname:null===(t=e.profile)||void 0===t?void 0:t.nickname,username:null===(a=e.profile)||void 0===a?void 0:a.username}},getUserId:function(e){return e.profile?e.profile.user_id:""},getWallets:function(e){return e.profile?e.profile.wallets.sort((function(e,t){return t.selected-e.selected})).map((function(e){return{wallet_id:e.wallet_id,wallet_total:e.wallet_total,wallet_name:e.wallet_name,wallet_description:e.wallet_description,selected:!!e.selected}})):[]}}},Pt=Et,At={namespaced:!0,state:{date:new Date,currentMax:new Date((new Date).setMonth((new Date).getMonth()+3)),currentMin:new Date((new Date).setMonth((new Date).getMonth()-2))},mutations:{setDate:function(e,t){e.date=t},setCurrentMax:function(e,t){e.currentMax=t},setCurrentMin:function(e,t){e.currentMin=t}},actions:{setDate:function(e,t){var a=e.commit,n=e.state,o=e.dispatch;a("setDate",t);var r=n.currentMax,i=n.currentMin;(t>=r||t<=i)&&(a("setCurrentMax",new Date(new Date(t).setMonth(t.getMonth()+3))),a("setCurrentMin",new Date(new Date(t).setMonth(t.getMonth()-2))),o("wallet/getWallet",null,{root:!0}))}},getters:{getDate:function(e){return e.date}}},Ft=At,qt={namespaced:!0,state:{wallet:null},mutations:{setWallet:function(e,t){e.wallet=t}},actions:{setWallet:function(e,t){var a=e.commit;a("setWallet",t)},getWallet:function(e){return Object(St["a"])(regeneratorRuntime.mark((function t(){var a,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,n=e.getters,o=e.rootGetters,Lt("/api/wallet","get",{params:{wallet_id:n.getWalletId,time_choosen:o["calendar/getDate"].toISOString().split("Z")[0]}}).then((function(e){a("setWallet",e.data.data)})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})))()},createWallet:function(e,t){return Object(St["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.dispatch,Lt("/api/wallet/create","post",{data:{wallet_name:null===t||void 0===t?void 0:t.wallet_name,wallet_description:null===t||void 0===t?void 0:t.wallet_descriptions}}).then((function(){n("auth/getProfile",null,{root:!0})})).catch((function(e){console.log(e)}));case 2:case"end":return a.stop()}}),a)})))()},editWallet:function(e,t){return Object(St["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.dispatch,Lt("/api/wallet/edit","post",{data:{wallet_name:null===t||void 0===t?void 0:t.wallet_name,wallet_description:null===t||void 0===t?void 0:t.wallet_description,wallet_id:null===t||void 0===t?void 0:t.wallet_id}}).then((function(){n("auth/getProfile",null,{root:!0})})).catch((function(e){console.log(e)}));case 2:case"end":return a.stop()}}),a)})))()},deleteWallet:function(e){return Object(St["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.getters,n=e.dispatch,Lt("/api/wallet/delete","post",{data:{wallet_id:a.getWalletId}}).then((function(){n("auth/getProfile",null,{root:!0})})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})))()},switchWallet:function(e,t){return Object(St["a"])(regeneratorRuntime.mark((function a(){var n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.rootGetters,o=e.dispatch,Lt("/api/wallet","get",{params:{wallet_id:t,time_choosen:n["calendar/getDate"].toISOString().split("Z")[0]}}).then((function(){o("auth/getProfile",null,{root:!0})})).catch((function(e){console.log(e)}));case 2:case"end":return a.stop()}}),a)})))()}},getters:{getRecords:function(e){return e.wallet?e.wallet.records:[]},getWalletId:function(e){return e.wallet?e.wallet.wallet_id:""},getWalletInfo:function(e){return e.wallet?{wallet_id:e.wallet.wallet_id,wallet_total:e.wallet.wallet_total,wallet_name:e.wallet.wallet_name,wallet_description:e.wallet.wallet_description}:{}},getWalletTags:function(e){return function(t){return e.wallet?e.wallet.tags.filter((function(e){return e.tag_type==t})):[]}}}},Bt=qt,zt={namespaced:!0,state:{modal:!1,data:{},mode:"create"},mutations:{setModal:function(e,t){e.modal=t},setMode:function(e,t){e.mode=t},setData:function(e,t){e.data=t}},actions:{openModal:function(e){var t=e.commit;t("setModal",!0)},closeModal:function(e){var t=e.commit;t("setModal",!1)},createMode:function(e){var t=e.commit;t("setMode","create")},editMode:function(e){var t=e.commit;t("setMode","edit")},setData:function(e,t){var a=e.commit;a("setData",t)},createRecord:function(e,t){return Object(St["a"])(regeneratorRuntime.mark((function a(){var n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.rootGetters,o=e.dispatch,Lt("/api/record/create","post",{data:{wallet_id:n["wallet/getWalletId"],wallet_record_tag_id:null===t||void 0===t?void 0:t.wallet_record_tag_id,record_ordinary:1,record_name:null===t||void 0===t?void 0:t.record_name,record_description:null===t||void 0===t?void 0:t.record_description,record_amount:null===t||void 0===t?void 0:t.record_amount,record_type:null===t||void 0===t?void 0:t.record_type,record_date:new Date(null===t||void 0===t?void 0:t.record_date).toISOString().split("Z")[0]}}).then((function(e){console.log(e.data),o("auth/getProfile",null,{root:!0})})).catch((function(e){console.log(e)})).then((function(){o("closeModal")}));case 2:case"end":return a.stop()}}),a)})))()},editRecord:function(e,t){return Object(St["a"])(regeneratorRuntime.mark((function a(){var n,o,r,i,l,c,s,d,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.rootGetters,o=e.getters,r=e.dispatch,i=o.getData,l=null===t||void 0===t?void 0:t.record_amount,c=null===i||void 0===i?void 0:i.record_amount,s="expense"==(null===t||void 0===t?void 0:t.record_type)?-1:1,d="expense"==(null===i||void 0===i?void 0:i.record_type)?-1:1,u=s*l-d*c,Lt("/api/record/edit","post",{data:{record_id:null===t||void 0===t?void 0:t.record_id,record_wallet_id:n["wallet/getWalletId"],wallet_record_tag_id:null===t||void 0===t?void 0:t.wallet_record_tag_id,record_ordinary:1,record_name:null===t||void 0===t?void 0:t.record_name,record_description:null===t||void 0===t?void 0:t.record_description,record_amount:null===t||void 0===t?void 0:t.record_amount,record_type:null===t||void 0===t?void 0:t.record_type,record_date:new Date(null===t||void 0===t?void 0:t.record_date).toISOString().split("Z")[0],record_amount_diff:u}}).then((function(e){console.log(e.data),r("auth/getProfile",null,{root:!0})})).catch((function(e){console.log(e)})).then((function(){r("closeModal")}));case 8:case"end":return a.stop()}}),a)})))()},deleteRecord:function(e,t){return Object(St["a"])(regeneratorRuntime.mark((function a(){var n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.rootGetters,o=e.dispatch,Lt("/api/record/delete","post",{data:{record_id:null===t||void 0===t?void 0:t.record_id,record_wallet_id:n["wallet/getWalletId"],record_amount:null===t||void 0===t?void 0:t.record_amount}}).then((function(e){console.log(e.data),o("auth/getProfile",null,{root:!0})})).catch((function(e){console.log(e)})).then((function(){o("closeModal")}));case 2:case"end":return a.stop()}}),a)})))()}},getters:{getModal:function(e){return e.modal},getMode:function(e){return e.mode},getData:function(e){return e.data}}},Ht=zt;n["default"].use(l["a"]);var Gt=new l["a"].Store({modules:{auth:Pt,calendar:Ft,wallet:Bt,record:Ht}});n["default"].use(ce["a"]);var Nt=[{path:"/",name:"Home",component:Ve,meta:{requiresAuth:!0}},{path:"/search",name:"Search",component:Me},{path:"/chart",name:"Chart",component:Pe,meta:{requiresAuth:!0}},{path:"/setting",name:"Setting",component:pt,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:bt,meta:{requiresAuth:!1}},{path:"/callback/signup",name:"CallbackSignup",component:Ct,meta:{requiresAuth:!1}},{path:"/callback/login",name:"CallbackLogin",component:Mt,meta:{requiresAuth:!1}}],Zt=new ce["a"]({mode:"history",base:"/",routes:Nt});Zt.beforeEach((function(e,t,a){var n=Gt.getters["auth/isLoggedin"];console.log(n),e.matched.some((function(e){return e.meta.requiresAuth}))?n?a():a({path:"/login"}):a()}));var Jt=Zt,Kt=a("f309");n["default"].use(Kt["a"]);var Ut=new Kt["a"]({}),Yt=a("5887"),Qt=a.n(Yt);n["default"].use(Qt.a,{componentPrefix:"vc"}),n["default"].config.productionTip=!1,new n["default"]({router:Jt,store:Gt,vuetify:Ut,render:function(e){return e(le)}}).$mount("#app")},"85ec":function(e,t,a){},"95a2":function(e,t,a){"use strict";a("b1aa")},b1aa:function(e,t,a){}});
//# sourceMappingURL=app.c63c3be0.js.map