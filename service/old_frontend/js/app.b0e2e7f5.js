(function(t){function e(e){for(var n,i,l=e[0],c=e[1],s=e[2],u=0,v=[];u<l.length;u++)i=l[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&v.push(o[i][0]),o[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(v.length)v.shift()();return r.push.apply(r,s||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,l=1;l<a.length;l++){var c=a[l];0!==o[c]&&(n=!1)}n&&(r.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},o={app:0},r=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var s=0;s<l.length;s++)e(l[s]);var d=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[t.isLoggedin?[a("v-app-bar",{attrs:{color:"deep-purple accent-4",dark:"",app:"","hide-on-scroll":!1}},[a("v-app-bar-nav-icon",{on:{click:function(e){t.drawer=!0}}}),a("v-spacer"),a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("mdi-barcode-scan")])],1),a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("mdi-chart-arc")])],1)],1),a("v-navigation-drawer",{attrs:{app:"",temporary:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"text-h6"},[t._v(" "+t._s(t.basicInformation.nickname)+" ")]),a("v-list-item-subtitle",[t._v(" "+t._s(t.basicInformation.username)+" ")])],1)],1),a("v-divider")]},proxy:!0},{key:"append",fn:function(){return[a("div",{staticClass:"pa-4"},[a("v-btn",{staticClass:"my-2",attrs:{block:"",to:"/setting"}},[t._v(" Setting ")]),a("v-btn",{staticClass:"my-2",attrs:{block:"",color:"error"},on:{click:t.logout}},[t._v(" Logout ")])],1)]},proxy:!0}],null,!1,989714857),model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("Wallets")],1)]:t._e(),t.isReady?a("v-main",[a("v-container",{staticStyle:{height:"100%"},attrs:{fluid:""}},[a("router-view")],1),a("RecordModal"),t.isLoggedin?a("v-btn",{attrs:{color:"primary",bottom:"",right:"",fab:"",fixed:""},on:{click:t.openRecordModal}},[a("v-icon",[t._v("mdi-plus")])],1):t._e()],1):t._e()],2)},r=[],i=a("5530"),l=a("2f62"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list",[t._l(t.wallets,(function(e,n){return[a("v-list-item",{key:e.wallet_id,attrs:{"three-line":e.selected}},[a("v-list-item-content",[e.selected?a("v-list-item-title",[t._v("目前錢包")]):t._e(),a("v-list-item-title",{staticClass:"text-h6 d-flex justify-space-between"},[a("span",[t._v(t._s(e.wallet_name))]),e.selected?a("span",[t._v("$"+t._s(e.wallet_total))]):t._e()]),e.selected?a("v-list-item-subtitle",[t._v(" "+t._s(e.wallet_description)+" ")]):t._e()],1),e.selected?t._e():a("v-list-item-action",[a("v-btn",{attrs:{icon:""}},[a("v-icon",{on:{click:function(a){return t.switchWallet(e.wallet_id)}}},[t._v("mdi-cached")])],1)],1)],1),e.selected?a("v-divider",{key:n}):t._e()]})),a("v-sheet",{staticClass:"pa-2"},[a("v-btn",{attrs:{block:"",color:"primary"},on:{click:t.createModal}},[t._v("新增錢包")])],1),a("WalletModal",{attrs:{mode:"create",open:t.walletDialogOpen},on:{handleDialogChange:t.handleWalletDialogChange}})],2)},s=[],d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center"},[a("v-dialog",{attrs:{width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{staticClass:"d-flex flex-column",staticStyle:{overflow:"hidden"}},[a("v-toolbar",{attrs:{dark:"",flat:"",color:"primary"}},[a("v-toolbar-title",[t._v(t._s("edit"==t.mode?"修改":"新增")+"錢包")])],1),a("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-container",{staticClass:"flex-grow-1",staticStyle:{overflow:"auto"}},[a("v-text-field",{attrs:{label:"標題","prepend-icon":"mdi-format-title",required:"",rules:[function(t){return!!t||"請填入標題"}]},model:{value:t.data.wallet_name,callback:function(e){t.$set(t.data,"wallet_name",e)},expression:"data.wallet_name"}}),a("v-text-field",{attrs:{label:"備註","prepend-icon":"mdi-message-text"},model:{value:t.data.wallet_description,callback:function(e){t.$set(t.data,"wallet_description",e)},expression:"data.wallet_description"}})],1),a("v-card-actions",[a("v-row",{attrs:{justify:"end"}},[a("v-col",{attrs:{cols:"6"}},[a("v-btn",{attrs:{type:"submit",color:"primary",block:"",disabled:!t.valid}},[t._v(" "+t._s("edit"==t.mode?"修改":"新增")+" ")])],1)],1)],1)],1)],1)],1)],1)},u=[],v={props:{open:Boolean,mode:String,editingWallet:Object},name:"WalletModal",data:function(){return{valid:!0,data:{wallet_name:"",wallet_description:"",wallet_id:""}}},methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])({createWallet:"wallet/createWallet",editWallet:"wallet/editWallet"})),{},{handleSubmit:function(){var t=this;this.$refs.form.validate()&&("create"==this.mode?this.createWallet(this.data).then((function(){t.dialog=!1})):"edit"==this.mode&&this.editWallet(this.data).then((function(){t.dialog=!1})))}}),computed:{dialog:{get:function(){return this.open},set:function(t){this.$emit("handleDialogChange",t)}}},watch:{dialog:function(t){this.$refs.form&&this.$refs.form.resetValidation(),1==t&&("create"==this.mode?this.data={wallet_name:"",wallet_description:"",wallet_id:""}:"edit"==this.mode&&(this.data={wallet_name:this.editingWallet.wallet_name,wallet_description:this.editingWallet.wallet_description,wallet_id:this.editingWallet.wallet_id}))}}},p=v,m=a("2877"),f=a("6544"),g=a.n(f),h=a("8336"),_=a("b0af"),b=a("99d9"),w=a("62ad"),x=a("a523"),y=a("169a"),k=a("4bd4"),O=a("0fd9"),V=a("8654"),T=a("71d9"),C=a("2a7f"),D=Object(m["a"])(p,d,u,!1,null,null,null),j=D.exports;g()(D,{VBtn:h["a"],VCard:_["a"],VCardActions:b["a"],VCol:w["a"],VContainer:x["a"],VDialog:y["a"],VForm:k["a"],VRow:O["a"],VTextField:V["a"],VToolbar:T["a"],VToolbarTitle:C["a"]});var I={name:"Wallets",data:function(){return{walletDialogOpen:!1}},components:{WalletModal:j},mounted:function(){},methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])({deleteWallet:"wallet/deleteWallet",switchWallet:"wallet/switchWallet"})),{},{handleDialogChange:function(t){this.tagDialogOpen=t},handleWalletDialogChange:function(t){this.walletDialogOpen=t},createModal:function(){this.walletDialogOpen=!0}}),computed:Object(i["a"])({},Object(l["c"])({wallets:"auth/getWallets"}))},M=I,R=a("ce7e"),W=a("132d"),S=a("8860"),$=a("da13"),L=a("1800"),A=a("5d23"),E=a("8dd9"),P=Object(m["a"])(M,c,s,!1,null,null,null),B=P.exports;g()(P,{VBtn:h["a"],VDivider:R["a"],VIcon:W["a"],VList:S["a"],VListItem:$["a"],VListItemAction:L["a"],VListItemContent:A["a"],VListItemSubtitle:A["b"],VListItemTitle:A["c"],VSheet:E["a"]});var q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{"max-width":"500",scrollable:""},model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",flat:"",color:"primary"},scopedSlots:t._u([{key:"extension",fn:function(){return[a("v-tabs",{attrs:{grow:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab",[t._v("收入")]),a("v-tab",[t._v("支出")])],1)]},proxy:!0}])},[a("v-toolbar-title",[t._v(t._s("create"==t.mode?"新增":"修改")+"帳目")])],1),a("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.sendRecord.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-card-text",[a("v-text-field",{attrs:{label:"標題","prepend-icon":"mdi-format-title",required:"",rules:[function(t){return t&&t.length>0||"請填入標題"}]},model:{value:t.data.record_name,callback:function(e){t.$set(t.data,"record_name",e)},expression:"data.record_name"}}),a("v-menu",{ref:"record_date_picker",attrs:{"close-on-content-click":!1,"return-value":t.data.record_date,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){return t.$set(t.data,"record_date",e)},"update:return-value":function(e){return t.$set(t.data,"record_date",e)}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"時間","prepend-icon":"mdi-calendar",readonly:"",required:"",rules:[function(t){return t&&t.length>0||"請填入時間"}]},model:{value:t.data.record_date,callback:function(e){t.$set(t.data,"record_date",e)},expression:"data.record_date"}},"v-text-field",o,!1),n))]}}]),model:{value:t.record_date_picker,callback:function(e){t.record_date_picker=e},expression:"record_date_picker"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.data.record_date,callback:function(e){t.$set(t.data,"record_date",e)},expression:"data.record_date"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.record_date_picker=!1}}},[t._v(" Cancel ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.record_date_picker.save(t.data.record_date)}}},[t._v(" OK ")])],1)],1),a("v-text-field",{attrs:{label:"金額",type:"number","prepend-icon":"mdi-currency-usd",required:"",rules:[function(t){return t&&!isNaN(parseFloat(t))||"請填入金額"}]},model:{value:t.data.record_amount,callback:function(e){t.$set(t.data,"record_amount",t._n(e))},expression:"data.record_amount"}}),a("v-select",{attrs:{items:t.walletTags,label:"標籤","prepend-icon":"mdi-tag"},scopedSlots:t._u([{key:"selection",fn:function(e){var n=e.item;return[a("v-chip",{staticClass:"ma-2",attrs:{color:n.value.tag_color,"text-color":t.contrastText(n.value.tag_color),label:"",small:""}},[t._v(" "+t._s(n.text)+" ")])]}},{key:"item",fn:function(e){var n=e.item;return[a("v-chip",{staticClass:"mx-2",attrs:{color:n.value.tag_color,"text-color":t.contrastText(n.value.tag_color),label:"",small:""}},[t._v(" "+t._s(n.text)+" ")])]}}]),model:{value:t.selectedTag,callback:function(e){t.selectedTag=e},expression:"selectedTag"}}),a("v-text-field",{attrs:{label:"備註","prepend-icon":"mdi-message-text"},model:{value:t.data.record_description,callback:function(e){t.$set(t.data,"record_description",e)},expression:"data.record_description"}})],1),a("v-container",[a("v-row",[a("v-col",["edit"==t.mode?a("v-btn",{attrs:{color:"error",block:""},on:{click:function(e){return t.deleteRecord(t.data)}}},[t._v(" 刪除 ")]):t._e()],1),a("v-col",[a("v-btn",{attrs:{type:"submit",color:"primary",block:"",disabled:!t.valid}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)},F=[],z=(a("ac1f"),a("1276"),a("fb6a"),a("d81d"),a("7db0"),a("d3b7"),{name:"RecordDialog",data:function(){return{data:{record_amount:null,record_created_time:"",record_date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().split("T")[0],record_description:"",record_id:"",record_name:"",record_ordinary:1,record_type:"income",record_updated_time:"",wallet_record_tag_id:""},valid:!0,record_date_picker:!1,record_tag_selector:!1}},methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])({closeModal:"record/closeModal",createRecord:"record/createRecord",editRecord:"record/editRecord",deleteRecord:"record/deleteRecord",setData:"record/setData"})),{},{sendRecord:function(){this.$refs.form.validate()&&("create"==this.mode?this.createRecord(this.data):"edit"==this.mode&&this.editRecord(this.data))},contrastText:function(t){var e="#"===t.charAt(0)?t.substring(1,7):t,a=parseInt(e.slice(0,2),16),n=parseInt(e.slice(2,4),16),o=parseInt(e.slice(4,6),16);return.299*a+.587*n+.114*o>186?"black":"white"}}),computed:Object(i["a"])(Object(i["a"])({},Object(l["c"])({mode:"record/getMode",editData:"record/getData",_walletTags:"wallet/getWalletTags",calendarDate:"calendar/getDate"})),{},{walletTags:function(){return this._walletTags(this.data.record_type).map((function(t){return{text:t.tag_name,value:t}}))},open:{get:function(){return this.$store.getters["record/getModal"]},set:function(t){1==t&&this.$store.dispatch("record/openModal"),0==t&&this.$store.dispatch("record/closeModal")}},tab:{get:function(){return"income"==this.data.record_type?0:"expense"==this.data.record_type?1:0},set:function(t){this.data.wallet_record_tag_id="",0==t?this.data.record_type="income":1==t&&(this.data.record_type="expense")}},selectedTag:{get:function(){var t,e=this;return null===(t=this.walletTags.find((function(t){return t.value.tag_id==e.data.wallet_record_tag_id})))||void 0===t?void 0:t.value},set:function(t){this.data.wallet_record_tag_id=t.tag_id}}}),watch:{"data.record_type":function(){var t;this.data.wallet_record_tag_id=null===(t=this.walletTags[0])||void 0===t?void 0:t.value.tag_id},open:function(t){var e;1==t?(this.$refs.form&&this.$refs.form.resetValidation(),"create"==this.mode?this.data={record_amount:null,record_created_time:"",record_date:new Date(this.calendarDate-6e4*this.calendarDate.getTimezoneOffset()).toISOString().split("T")[0],record_description:"",record_id:"",record_name:"",record_ordinary:1,record_type:"income",record_updated_time:"",wallet_record_tag_id:null===(e=this.walletTags[0])||void 0===e?void 0:e.value.tag_id}:"edit"==this.mode&&(this.data=Object.assign({},this.editData),this.data.record_date=new Date(new Date(this.data.record_date)-6e4*new Date(this.data.record_date).getTimezoneOffset()).toISOString().split("T")[0])):this.setData(new Object)}}}),H=z,G=a("cc20"),N=a("2e4b"),Z=a("e449"),J=a("b974"),U=a("2fa4"),Y=a("71a3"),K=a("fe57"),Q=Object(m["a"])(H,q,F,!1,null,null,null),X=Q.exports;g()(Q,{VBtn:h["a"],VCard:_["a"],VCardText:b["c"],VChip:G["a"],VCol:w["a"],VContainer:x["a"],VDatePicker:N["a"],VDialog:y["a"],VForm:k["a"],VMenu:Z["a"],VRow:O["a"],VSelect:J["a"],VSpacer:U["a"],VTab:Y["a"],VTabs:K["a"],VTextField:V["a"],VToolbar:T["a"],VToolbarTitle:C["a"]});var tt={name:"App",data:function(){return{route:"Home",drawer:!1}},components:{RecordModal:X,Wallets:B},mounted:function(){this.login()},methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])({login:"auth/login",logout:"auth/logout",openModal:"record/openModal",switchCreateMode:"record/createMode"})),{},{openRecordModal:function(){this.openModal(),this.switchCreateMode()}}),computed:Object(i["a"])({},Object(l["c"])({isLoggedin:"auth/isLoggedin",isReady:"auth/isReady",basicInformation:"auth/basicInformation",walletDetail:"wallet/getWalletDetail"})),watch:{isLoggedin:function(){if(!this.isLoggedin)return this.$router.push({path:"/login",replace:!0})}}},et=tt,at=(a("034f"),a("7496")),nt=a("40dc"),ot=a("5bc1"),rt=a("f6c4"),it=a("f774"),lt=Object(m["a"])(et,o,r,!1,null,null,null),ct=lt.exports;g()(lt,{VApp:at["a"],VAppBar:nt["a"],VAppBarNavIcon:ot["a"],VBtn:h["a"],VContainer:x["a"],VDivider:R["a"],VIcon:W["a"],VListItem:$["a"],VListItemContent:A["a"],VListItemSubtitle:A["b"],VListItemTitle:A["c"],VMain:rt["a"],VNavigationDrawer:it["a"],VSpacer:U["a"]});var st=a("8c4f"),dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-sheet",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("Calendar",{staticClass:"pa-1"})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-expansion-panels",{staticClass:"pa-1",attrs:{accordion:""}},t._l(t.getTodaysRecords,(function(e){return a("v-expansion-panel",{key:e.record_id},[a("v-expansion-panel-header",{scopedSlots:t._u([{key:"actions",fn:function(){return[a("span",[t._v(" "+t._s(e.record_amount)+" ")])]},proxy:!0}],null,!0)},[a("div",{staticClass:"d-flex align-center"},[a("v-chip",{staticClass:"ma-2",attrs:{color:t.tag(e.wallet_record_tag_id).tag_color,"text-color":t.contrastText(t.tag(e.wallet_record_tag_id).tag_color),label:"",small:""}},[t._v(" "+t._s(t.tag(e.wallet_record_tag_id).tag_name)+" ")]),a("span",[t._v(t._s(e.record_name))])],1)]),a("v-expansion-panel-content",[a("p",[t._v(t._s(e.record_description))]),a("v-row",[a("v-col",[a("v-btn",{attrs:{color:"primary",block:""},on:{click:function(a){return t.openRecordModal(e)}}},[t._v("修改")])],1),a("v-col",[a("v-btn",{attrs:{color:"error",block:""},on:{click:function(a){return t.deleteRecord(e)}}},[t._v("刪除")])],1)],1)],1)],1)})),1)],1)],1)],1)},ut=[],vt=(a("4de4"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("vc-date-picker",{attrs:{"is-expanded":"","is-required":""},on:{"update:to-page":t.toPage},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)}),pt=[],mt={name:"Home",data:function(){return{}},mounted:function(){},methods:{toPage:function(t){t.month==this.date.getMonth()+1&&t.year==this.date.getFullYear()||(this.date=new Date(new Date(this.date.setMonth(t.month-1)).setFullYear(t.year)))}},computed:{date:{get:function(){return this.$store.getters["calendar/getDate"]},set:function(t){this.$store.dispatch("calendar/setDate",t)}}}},ft=mt,gt=Object(m["a"])(ft,vt,pt,!1,null,null,null),ht=gt.exports,_t={name:"Home",data:function(){return{}},components:{Calendar:ht},mounted:function(){},methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])({deleteRecord:"record/deleteRecord",openModal:"record/openModal",switchEditMode:"record/editMode",setData:"record/setData"})),{},{openRecordModal:function(t){this.openModal(),this.switchEditMode(),this.setData(t)},contrastText:function(t){var e="#"===t.charAt(0)?t.substring(1,7):t,a=parseInt(e.slice(0,2),16),n=parseInt(e.slice(2,4),16),o=parseInt(e.slice(4,6),16);return.299*a+.587*n+.114*o>186?"black":"white"},tag:function(t){return this.getAllWalletTags.find((function(e){return e.tag_id==t}))}}),computed:Object(i["a"])(Object(i["a"])({},Object(l["c"])({currentDate:"calendar/getDate",records:"wallet/getRecords",getAllWalletTags:"wallet/getAllWalletTags"})),{},{getTodaysRecords:function(){var t=this;return this.records.filter((function(e){var a=new Date(e.record_date),n=new Date(t.currentDate);return a.setHours(0,0,0,0)==n.setHours(0,0,0,0)}))}})},bt=_t,wt=a("cd55"),xt=a("49e2"),yt=a("c865"),kt=a("0393"),Ot=Object(m["a"])(bt,dt,ut,!1,null,null,null),Vt=Ot.exports;g()(Ot,{VBtn:h["a"],VChip:G["a"],VCol:w["a"],VExpansionPanel:wt["a"],VExpansionPanelContent:xt["a"],VExpansionPanelHeader:yt["a"],VExpansionPanels:kt["a"],VRow:O["a"],VSheet:E["a"]});var Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{staticClass:"fill-height"},[a("v-col",[a("v-sheet",{attrs:{height:"64"}},[a("v-toolbar",{attrs:{flat:""}},[a("v-btn",{staticClass:"mr-4",attrs:{outlined:"",color:"grey darken-2"},on:{click:t.setToday}},[t._v(" Today ")]),a("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:t.prev}},[a("v-icon",{attrs:{small:""}},[t._v(" mdi-chevron-left ")])],1),a("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:t.next}},[a("v-icon",{attrs:{small:""}},[t._v(" mdi-chevron-right ")])],1),t.$refs.calendar?a("v-toolbar-title",[t._v(" "+t._s(t.$refs.calendar.title)+" ")]):t._e(),a("v-spacer"),a("v-menu",{attrs:{bottom:"",right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-btn",t._g(t._b({attrs:{outlined:"",color:"grey darken-2"}},"v-btn",o,!1),n),[a("span",[t._v(t._s(t.typeToLabel[t.type]))]),a("v-icon",{attrs:{right:""}},[t._v(" mdi-menu-down ")])],1)]}}])},[a("v-list",[a("v-list-item",{on:{click:function(e){t.type="day"}}},[a("v-list-item-title",[t._v("Day")])],1),a("v-list-item",{on:{click:function(e){t.type="week"}}},[a("v-list-item-title",[t._v("Week")])],1),a("v-list-item",{on:{click:function(e){t.type="month"}}},[a("v-list-item-title",[t._v("Month")])],1),a("v-list-item",{on:{click:function(e){t.type="4day"}}},[a("v-list-item-title",[t._v("4 days")])],1)],1)],1)],1)],1),a("v-sheet",{attrs:{height:"600"}},[a("v-calendar",{ref:"calendar",attrs:{color:"primary",events:t.events,"event-color":t.getEventColor,type:t.type},on:{"click:event":t.showEvent,"click:more":t.viewDay,"click:date":t.viewDay,change:t.updateRange},model:{value:t.focus,callback:function(e){t.focus=e},expression:"focus"}}),a("v-menu",{attrs:{"close-on-content-click":!1,activator:t.selectedElement,"offset-x":""},model:{value:t.selectedOpen,callback:function(e){t.selectedOpen=e},expression:"selectedOpen"}},[a("v-card",{attrs:{color:"grey lighten-4","min-width":"350px",flat:""}},[a("v-toolbar",{attrs:{color:t.selectedEvent.color,dark:""}},[a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("mdi-pencil")])],1),a("v-toolbar-title",{domProps:{innerHTML:t._s(t.selectedEvent.name)}}),a("v-spacer"),a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("mdi-heart")])],1),a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("mdi-dots-vertical")])],1)],1),a("v-card-text",[a("span",{domProps:{innerHTML:t._s(t.selectedEvent.details)}},[t._v("tester")])]),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"secondary"},on:{click:function(e){t.selectedOpen=!1}}},[t._v(" Cancel ")])],1)],1)],1)],1)],1)],1)},Ct=[],Dt={data:function(){return{focus:"",type:"month",typeToLabel:{month:"Month",week:"Week",day:"Day","4day":"4 Days"},selectedEvent:{},selectedElement:null,selectedOpen:!1,events:[],colors:["blue","indigo","deep-purple","cyan","green","orange","grey darken-1"],names:["Meeting","Holiday","PTO","Travel","Event","Birthday","Conference","Party"]}},mounted:function(){this.$refs.calendar.checkChange()},methods:{viewDay:function(t){var e=t.date;this.focus=e,this.type="day"},getEventColor:function(t){return t.color},setToday:function(){this.focus=""},prev:function(){this.$refs.calendar.prev()},next:function(){this.$refs.calendar.next()},showEvent:function(t){var e=this,a=t.nativeEvent,n=t.event,o=function(){e.selectedEvent=n,e.selectedElement=a.target,requestAnimationFrame((function(){return requestAnimationFrame((function(){return e.selectedOpen=!0}))}))};this.selectedOpen?(this.selectedOpen=!1,requestAnimationFrame((function(){return requestAnimationFrame((function(){return o()}))}))):o(),a.stopPropagation()},updateRange:function(t){for(var e=t.start,a=t.end,n=[],o=new Date("".concat(e.date,"T00:00:00")),r=new Date("".concat(a.date,"T23:59:59")),i=(r.getTime()-o.getTime())/864e5,l=this.rnd(i,i+20),c=0;c<l;c++){var s=0===this.rnd(0,3),d=this.rnd(o.getTime(),r.getTime()),u=new Date(d-d%9e5),v=9e5*this.rnd(2,s?288:8),p=new Date(u.getTime()+v);n.push({name:this.names[this.rnd(0,this.names.length-1)],start:u,end:p,color:this.colors[this.rnd(0,this.colors.length-1)],timed:!s})}this.events=n},rnd:function(t,e){return Math.floor((e-t+1)*Math.random())+t}}},jt=Dt,It=a("a4f6"),Mt=Object(m["a"])(jt,Tt,Ct,!1,null,null,null),Rt=Mt.exports;g()(Mt,{VBtn:h["a"],VCalendar:It["a"],VCard:_["a"],VCardActions:b["a"],VCardText:b["c"],VCol:w["a"],VIcon:W["a"],VList:S["a"],VListItem:$["a"],VListItemTitle:A["c"],VMenu:Z["a"],VRow:O["a"],VSheet:E["a"],VSpacer:U["a"],VToolbar:T["a"],VToolbarTitle:C["a"]});var Wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.desserts,"sort-by":"prices"},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("記帳清單")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",o,!1),n),[t._v(" 新增項目 ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"名稱"},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"價格"},model:{value:t.editedItem.prices,callback:function(e){t.$set(t.editedItem,"prices",e)},expression:"editedItem.prices"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"敘述"},model:{value:t.editedItem.desc,callback:function(e){t.$set(t.editedItem,"desc",e)},expression:"editedItem.desc"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" 取消 ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" 儲存 ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"font-weight-bold"},[t._v("確定要刪除此項目嗎？")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("取消")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("確定")]),a("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var n=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(n)}}},[t._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteItem(n)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:t.initialize}},[t._v(" Reset ")])]},proxy:!0}])})},St=[],$t=(a("159b"),a("a434"),{data:function(){return{dialog:!1,dialogDelete:!1,headers:[{text:"項目",align:"start",sortable:!1,value:"name"},{text:"價格",value:"prices"},{text:"描述",align:"start",sortable:!1,value:"desc"},{text:"動作",value:"actions",sortable:!1}],desserts:[],editedIndex:-1,editedItem:{name:"",prices:0,desc:""},defaultItem:{name:"",prices:0,desc:""}}},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"},totalItem:function(){var t=0;return this.items.forEach((function(e){t+=parseFloat(e.price)*parseFloat(e.quantity)})),t}},watch:{dialog:function(t){t||this.close()},dialogDelete:function(t){t||this.closeDelete()}},created:function(){this.initialize()},methods:{initialize:function(){this.desserts=[{name:"吐司夾蛋",prices:159,desc:""},{name:"冰紅茶",prices:237,desc:"好喝"},{name:"英文講義",prices:262,desc:"for英文通識"},{name:"立可帶",prices:305,desc:""},{name:"泡麵",prices:356,desc:""},{name:"公車費",prices:375,desc:""},{name:"活動保證金",prices:392,desc:"社團：GDSC"},{name:"便當",prices:408,desc:""}]},editItem:function(t){this.editedIndex=this.desserts.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem:function(t){this.editedIndex=this.desserts.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},deleteItemConfirm:function(){this.desserts.splice(this.editedIndex,1),this.closeDelete()},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},save:function(){this.editedIndex>-1?Object.assign(this.desserts[this.editedIndex],this.editedItem):this.desserts.push(this.editedItem),this.close()}}}),Lt=$t,At=a("8fea"),Et=Object(m["a"])(Lt,Wt,St,!1,null,null,null),Pt=Et.exports;g()(Et,{VBtn:h["a"],VCard:_["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:w["a"],VContainer:x["a"],VDataTable:At["a"],VDialog:y["a"],VDivider:R["a"],VIcon:W["a"],VRow:O["a"],VSpacer:U["a"],VTextField:V["a"],VToolbar:T["a"],VToolbarTitle:C["a"]});var Bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-sheet",[a("v-toolbar",{staticClass:"mb-3",attrs:{flat:""}},[a("v-btn",{attrs:{icon:"",to:"/"}},[a("v-icon",[t._v("mdi-home")])],1),a("v-toolbar-title",[t._v("設定")])],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("p",[t._v("使用者設定")]),a("v-card",{staticClass:"mx-1"},[a("v-card-title",[t._v(t._s(t.basicInformation.nickname))]),a("v-card-subtitle",[t._v(t._s(t.basicInformation.username))])],1)],1),a("v-col",{attrs:{cols:"12"}},[a("p",[t._v("錢包設定")]),a("v-card",{staticClass:"mx-1"},[a("v-card-title",{staticClass:"text-h6 d-flex justify-space-between"},[a("span",[t._v(t._s(t.getWalletInfo.wallet_name))]),a("span",[t._v("$"+t._s(t.getWalletInfo.wallet_total))])]),a("v-card-subtitle",[t._v(t._s(t.getWalletInfo.wallet_description))]),a("v-container",[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"4"}},[a("v-btn",{attrs:{block:""},on:{click:function(e){return t.handleDialogChange(!0)}}},[t._v("編輯標籤")])],1),a("v-col",{attrs:{cols:"4"}},[a("v-btn",{attrs:{color:"info",block:""},on:{click:function(e){return t.editModal(t.getWalletInfo)}}},[t._v("編輯錢包")])],1),a("v-col",{attrs:{cols:"4"}},[a("v-btn",{attrs:{color:"error",block:""},on:{click:function(e){return t.deleteWallet(t.getWalletInfo.wallet_id)}}},[t._v("刪除錢包")])],1)],1)],1)],1)],1)],1),a("WalletModal",{attrs:{mode:"edit",open:t.walletDialogOpen,editingWallet:t.edittingWallet},on:{handleDialogChange:t.handleWalletDialogChange}}),a("TagModal",{attrs:{open:t.tagDialogOpen},on:{handleChange:t.handleDialogChange}})],1)},qt=[],Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{scrollable:"","max-width":"500"},model:{value:t.dialogOpen,callback:function(e){t.dialogOpen=e},expression:"dialogOpen"}},[a("v-card",{staticClass:"d-flex flex-column",staticStyle:{overflow:"hidden"}},[a("v-toolbar",{attrs:{dark:"",flat:"",color:"primary"},scopedSlots:t._u([{key:"extension",fn:function(){return[a("v-tabs",{attrs:{grow:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab",[t._v("收入")]),a("v-tab",[t._v("支出")])],1)]},proxy:!0}])},[a("v-toolbar-title",[t._v("編輯標籤")])],1),a("v-container",{staticClass:"flex-grow-1",staticStyle:{overflow:"auto"}},[a("v-tabs-items",{attrs:{touchless:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",[a("DraggableTag",{attrs:{list:t.incomeList},on:{handleChange:t.handleIncomeChange,handleeditTag:t.editTag}})],1),a("v-tab-item",[a("DraggableTag",{attrs:{list:t.expenseList},on:{handleChange:t.handleExpenseChange,handleeditTag:t.editTag}})],1)],1)],1),a("v-card-actions",[a("v-row",[a("v-col",[a("v-btn",{attrs:{color:"success",block:""},on:{click:t.createTag}},[t._v("新增標籤")])],1),a("v-col",[a("v-btn",{attrs:{color:"primary",block:""},on:{click:t.updateTag}},[t._v("儲存順序")])],1)],1)],1)],1),a("TagModal",{attrs:{open:t.tagModalOpen,mode:t.mode,type:t.type,editData:t.editTagData},on:{handleChange:t.handleDialogChange}})],1)},zt=[],Ht=(a("99af"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("draggable",t._b({staticClass:"list-group",attrs:{tag:"div",handle:".handle"},on:{start:function(e){t.drag=!0},end:function(e){t.drag=!1}},model:{value:t.renderList,callback:function(e){t.renderList=e},expression:"renderList"}},"draggable",t.dragOptions,!1),[a("transition-group",{attrs:{type:"transition",name:t.drag?null:"flip-list"}},t._l(t.renderList,(function(e){return a("v-sheet",{key:e.tag_id,staticClass:"list-group-item pa-1"},[a("v-card",[a("v-card-title",{staticClass:"d-flex justify-space-between align-content-center"},[a("span",[a("v-icon",{staticClass:"handle"},[t._v("mdi-drag")]),a("v-chip",{staticClass:"mx-2",attrs:{color:e.tag_color,"text-color":t.contrastText(e.tag_color),label:"",small:""}},[t._v(" "+t._s(e.tag_name)+" ")])],1),a("span",[a("v-btn",{attrs:{icon:""}},[a("v-icon",{on:{click:function(a){return t.editTag(e)}}},[t._v("mdi-pencil")])],1),a("v-btn",{attrs:{icon:"",color:"error"},on:{click:function(a){return t.deleteTag(e.tag_id)}}},[a("v-icon",[t._v("mdi-delete")])],1)],1)])],1)],1)})),1)],1)}),Gt=[],Nt=a("b76a"),Zt=a.n(Nt),Jt={name:"transition-example-2",props:{list:Array},data:function(){return{dragOptions:{animation:200,group:"description",disabled:!1,ghostClass:"ghost"},drag:!1}},components:{draggable:Zt.a},methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])({deleteTag:"wallet/deleteTag"})),{},{contrastText:function(t){var e="#"===t.charAt(0)?t.substring(1,7):t,a=parseInt(e.slice(0,2),16),n=parseInt(e.slice(2,4),16),o=parseInt(e.slice(4,6),16);return.299*a+.587*n+.114*o>186?"black":"white"},editTag:function(t){this.$emit("handleeditTag",t)}}),computed:{renderList:{get:function(){return this.list},set:function(t){this.$emit("handleChange",t)}}}},Ut=Jt,Yt=(a("95a2"),Object(m["a"])(Ut,Ht,Gt,!1,null,null,null)),Kt=Yt.exports;g()(Yt,{VBtn:h["a"],VCard:_["a"],VCardTitle:b["d"],VChip:G["a"],VIcon:W["a"],VSheet:E["a"]});var Qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{scrollable:"","max-width":"500"},model:{value:t.dialogOpen,callback:function(e){t.dialogOpen=e},expression:"dialogOpen"}},[a("v-card",{staticClass:"d-flex flex-column",staticStyle:{overflow:"hidden"}},[a("v-toolbar",{attrs:{dark:"",flat:"",color:"primary"}},[a("v-toolbar-title",[t._v(" "+t._s("create"==t.mode?"新增":"edit"==t.mode?"編輯":"")+t._s("income"==t.type?"收入":"expense"==t.type?"支出":"")+"標籤 ")])],1),a("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.sendTag.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-container",{staticClass:"flex-grow-1",staticStyle:{overflow:"auto"}},[a("v-text-field",{attrs:{label:"標題","prepend-icon":"mdi-format-title",required:"",rules:[function(t){return t&&t.length>0||"請填入標題"}]},model:{value:t.data.tag_name,callback:function(e){t.$set(t.data,"tag_name",e)},expression:"data.tag_name"}}),a("v-color-picker",{attrs:{mode:"hexa"},model:{value:t.data.tag_color,callback:function(e){t.$set(t.data,"tag_color",e)},expression:"data.tag_color"}})],1),a("v-card-actions",[a("v-row",{attrs:{justify:"end"}},[a("v-col",{attrs:{cols:"6"}},[a("v-btn",{attrs:{color:"primary",block:"",type:"submit",disabled:!t.valid}},[t._v("儲存")])],1)],1)],1)],1)],1)],1)},Xt=[],te={name:"TagModal",props:{open:Boolean,mode:String,type:String,editData:Object},data:function(){return{data:{tag_name:"",tag_color:"#B9B9B9"},valid:!0}},mounted:function(){},methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])({createTag:"wallet/createTag",editTag:"wallet/editTag"})),{},{sendTag:function(){var t=this;this.$refs.form.validate()&&("create"==this.mode?this.createTag(Object(i["a"])(Object(i["a"])({},this.data),{},{tag_type:this.type})).then((function(){t.dialogOpen=!1})):"edit"==this.mode&&this.editTag(Object(i["a"])(Object(i["a"])({},this.data),{},{tag_type:this.type})).then((function(){t.dialogOpen=!1})))}}),computed:Object(i["a"])(Object(i["a"])({},Object(l["c"])({tags:"wallet/getWalletTags"})),{},{dialogOpen:{get:function(){return this.open},set:function(t){this.$emit("handleChange",t)}}}),watch:{open:function(t){if(1==t)if(this.$refs.form&&this.$refs.form.resetValidation(),"create"==this.mode)this.data={tag_name:"",tag_color:"#B9B9B9"};else if("edit"==this.mode){var e,a,n,o;this.data={tag_name:null===(e=this.editData)||void 0===e?void 0:e.tag_name,tag_color:null===(a=this.editData)||void 0===a?void 0:a.tag_color,tag_id:null===(n=this.editData)||void 0===n?void 0:n.tag_id,tag_ordinary:null===(o=this.editData)||void 0===o?void 0:o.tag_ordinary}}}}},ee=te,ae=a("03a4"),ne=Object(m["a"])(ee,Qt,Xt,!1,null,null,null),oe=ne.exports;g()(ne,{VBtn:h["a"],VCard:_["a"],VCardActions:b["a"],VCol:w["a"],VColorPicker:ae["a"],VContainer:x["a"],VDialog:y["a"],VForm:k["a"],VRow:O["a"],VTextField:V["a"],VToolbar:T["a"],VToolbarTitle:C["a"]});var re={name:"RecordDialog",props:{open:Boolean},data:function(){return{incomeList:[],expenseList:[],type:"income",tagModalOpen:!1,editTagData:null,mode:"create"}},components:{DraggableTag:Kt,TagModal:oe},mounted:function(){this.initialize()},methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])({updateAllTags:"wallet/updateAllTags"})),{},{initialize:function(){this.incomeList=this.tags("income").map((function(t){return Object.assign({},t)})),this.expenseList=this.tags("expense").map((function(t){return Object.assign({},t)}))},handleIncomeChange:function(t){this.incomeList=t},handleExpenseChange:function(t){this.expenseList=t},handleDialogChange:function(t){this.tagModalOpen=t},updateTag:function(){var t=this;this.updateAllTags(this.tagList).then((function(){t.dialogOpen=!1}))},createTag:function(){this.handleDialogChange(!0),this.mode="create"},editTag:function(t){this.handleDialogChange(!0),this.mode="edit",this.editTagData=t}}),computed:Object(i["a"])(Object(i["a"])({},Object(l["c"])({tags:"wallet/getWalletTags"})),{},{dialogOpen:{get:function(){return 1==this.open&&this.initialize(),this.open},set:function(t){this.$emit("handleChange",t)}},tab:{get:function(){return"income"==this.type?0:"expense"==this.type?1:0},set:function(t){0==t?this.type="income":1==t&&(this.type="expense")}},tagList:function(){return this.expenseList.concat(this.incomeList).map((function(t,e){return Object(i["a"])(Object(i["a"])({},t),{},{tag_ordinary:e+1})}))}})},ie=re,le=a("c671"),ce=a("aac8"),se=Object(m["a"])(ie,Ft,zt,!1,null,null,null),de=se.exports;g()(se,{VBtn:h["a"],VCard:_["a"],VCardActions:b["a"],VCol:w["a"],VContainer:x["a"],VDialog:y["a"],VRow:O["a"],VTab:Y["a"],VTabItem:le["a"],VTabs:K["a"],VTabsItems:ce["a"],VToolbar:T["a"],VToolbarTitle:C["a"]});var ue={name:"Setting",data:function(){return{tagDialogOpen:!1,walletDialogOpen:!1,edittingWallet:null}},components:{WalletModal:j,TagModal:de},mounted:function(){},methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])({deleteWallet:"wallet/deleteWallet"})),{},{handleDialogChange:function(t){this.tagDialogOpen=t},handleWalletDialogChange:function(t){this.walletDialogOpen=t},editModal:function(t){this.edittingWallet=t,this.walletDialogOpen=!0}}),computed:Object(i["a"])({},Object(l["c"])({basicInformation:"auth/basicInformation",getWalletInfo:"wallet/getWalletInfo"}))},ve=ue,pe=Object(m["a"])(ve,Bt,qt,!1,null,null,null),me=pe.exports;g()(pe,{VBtn:h["a"],VCard:_["a"],VCardSubtitle:b["b"],VCardTitle:b["d"],VCol:w["a"],VContainer:x["a"],VIcon:W["a"],VRow:O["a"],VSheet:E["a"],VToolbar:T["a"],VToolbarTitle:C["a"]});var fe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-sheet",{staticClass:"d-flex flex-column justify-center",staticStyle:{height:"100%"}},[a("v-sheet",{staticClass:"d-flex justify-center"},[a("v-card",{attrs:{width:"100%","max-width":"500px"}},[a("v-card-title",[t._v("Wallet")]),a("v-card-actions",[a("v-row",{attrs:{justify:"end"}},[a("v-col",{attrs:{cols:"6"}},[a("v-btn",{attrs:{href:"/oauth/google/login",color:"primary",block:""}},[a("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-google")]),t._v(" login ")],1)],1)],1)],1)],1)],1)],1)},ge=[],he={name:"Home",data:function(){return{}},mounted:function(){if(this.isLoggedin)return this.$router.push({path:"/",replace:!0})},methods:{},computed:Object(i["a"])({},Object(l["c"])({isLoggedin:"auth/isLoggedin"})),watch:{isLoggedin:function(){if(this.isLoggedin)return this.$router.push({path:"/",replace:!0})}}},_e=he,be=Object(m["a"])(_e,fe,ge,!1,null,null,null),we=be.exports;g()(be,{VBtn:h["a"],VCard:_["a"],VCardActions:b["a"],VCardTitle:b["d"],VCol:w["a"],VIcon:W["a"],VRow:O["a"],VSheet:E["a"]});var xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-sheet",{staticClass:"d-flex flex-column justify-center",attrs:{height:"100%"}},[a("v-sheet",{staticClass:"d-flex justify-center"},[a("v-card",{attrs:{width:"100%","max-width":"500px"}},[a("v-card-title",[t._v("剩下最後一步，填寫你的暱稱吧")]),a("v-card-text",[a("v-text-field",{attrs:{label:"暱稱",placeholder:"暱稱"},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}})],1),a("v-card-actions",[a("v-row",{attrs:{justify:"end"}},[a("v-col",{attrs:{cols:"6"}},[a("v-btn",{attrs:{block:"",color:"primary"},on:{click:function(e){return t.signup(t.nickname)}}},[t._v("註冊")])],1)],1)],1)],1)],1)],1)},ye=[],ke=(a("5319"),{name:"CallbackSignup",data:function(){return{nickname:""}},mounted:function(){},methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])({_signup:"auth/signup"})),{},{signup:function(t){var e=this;this._signup({nickname:t}).then((function(){e.$router.replace("/login")}))}}),computed:{}}),Oe=ke,Ve=Object(m["a"])(Oe,xe,ye,!1,null,null,null),Te=Ve.exports;g()(Ve,{VBtn:h["a"],VCard:_["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:w["a"],VRow:O["a"],VSheet:E["a"],VTextField:V["a"]});var Ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("pending...")])},De=[],je={name:"CallbackLogin",data:function(){return{}},mounted:function(){var t=this;this.login().then((function(){t.$router.replace("/login")}))},methods:Object(i["a"])({},Object(l["b"])({login:"auth/login"})),computed:{}},Ie=je,Me=Object(m["a"])(Ie,Ce,De,!1,null,null,null),Re=Me.exports,We=a("1da1"),Se=(a("96cf"),a("d9e2"),a("4e827"),a("bc3a")),$e=a.n(Se);$e.a.defaults.baseURL="",$e.a.defaults.headers.post["Content-Type"]="application/json";var Le=function(t,e,a){var n="Bearer "+(localStorage.getItem("authToken")?localStorage.getItem("authToken"):"");if(void 0!==a)var o=a.params,r=void 0===o?{}:o,i=a.data,l=void 0===i?{}:i;else r=l=null;return new Promise((function(a,o){$e()({url:t,method:e,params:r,data:l,headers:{Authorization:n}}).then((function(t){a(t)}),(function(t){o(t)}))}))},Ae=Le,Ee={namespaced:!0,state:{authToken:"",profile:null,isAuthenticated:!1},mutations:{setAuthToken:function(t,e){t.authToken=e},setProfile:function(t,e){t.profile=e},authenticateSuccess:function(t){t.isAuthenticated=!0},authenticateFail:function(t){t.isAuthenticated=!1},logout:function(t){t.authToken="",t.profile={},t.isAuthenticated=!1}},actions:{login:function(t){var e=t.commit,a=t.dispatch;e("logout"),e("setProfile",null),e("setAuthToken",localStorage.getItem("authToken")),a("getProfile")},getProfile:function(t){return Object(We["a"])(regeneratorRuntime.mark((function e(){var a,n,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.commit,n=t.rootGetters,o=t.dispatch,r=n["calendar/getDate"],Ae("/api/user/profile","get",{params:{time_choosen:new Date(r).toISOString().split("Z")[0]}}).then((function(t){var e;if(null===(e=t.data)||void 0===e||!e.success)throw new Error(t.data);a("setProfile",t.data.data),o("wallet/setWallet",t.data.data.wallets.find((function(e){return e.wallet_id==t.data.data.selected_wallet_id})),{root:!0}),a("authenticateSuccess")})).catch((function(t){console.log(t),a("logout")}));case 3:case"end":return e.stop()}}),e)})))()},signup:function(t,e){return Object(We["a"])(regeneratorRuntime.mark((function a(){var n,o,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=t.commit,o=t.dispatch,r=e.nickname,Ae("/api/user/signup","post",{data:{nickname:r}}).then((function(t){var e;if(null===(e=t.data)||void 0===e||!e.success)throw new Error(t.data);o("login")})).catch((function(t){console.log(t),n("logout")}));case 3:case"end":return a.stop()}}),a)})))()},logout:function(t){return Object(We["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.commit,localStorage.clear("authToken"),a("logout");case 3:case"end":return e.stop()}}),e)})))()}},getters:{isLoggedin:function(t){return t.isAuthenticated},isReady:function(t){return null!=t.profile},basicInformation:function(t){var e,a;return{nickname:null===(e=t.profile)||void 0===e?void 0:e.nickname,username:null===(a=t.profile)||void 0===a?void 0:a.username}},getUserId:function(t){return t.profile?t.profile.user_id:""},getWallets:function(t){return t.profile?t.profile.wallets.sort((function(t,e){return e.selected-t.selected})).map((function(t){return{wallet_id:t.wallet_id,wallet_total:t.wallet_total,wallet_name:t.wallet_name,wallet_description:t.wallet_description,selected:!!t.selected}})):[]}}},Pe=Ee,Be={namespaced:!0,state:{date:new Date,currentMax:new Date((new Date).setMonth((new Date).getMonth()+3)),currentMin:new Date((new Date).setMonth((new Date).getMonth()-2))},mutations:{setDate:function(t,e){t.date=e},setCurrentMax:function(t,e){t.currentMax=e},setCurrentMin:function(t,e){t.currentMin=e}},actions:{setDate:function(t,e){var a=t.commit,n=t.state,o=t.dispatch;a("setDate",e);var r=n.currentMax,i=n.currentMin;(e>=r||e<=i)&&(a("setCurrentMax",new Date(new Date(e).setMonth(e.getMonth()+3))),a("setCurrentMin",new Date(new Date(e).setMonth(e.getMonth()-2))),o("wallet/getWallet",null,{root:!0}))}},getters:{getDate:function(t){return t.date}}},qe=Be,Fe={namespaced:!0,state:{wallet:null},mutations:{setWallet:function(t,e){t.wallet=e}},actions:{setWallet:function(t,e){var a=t.commit;e.tags=null===e||void 0===e?void 0:e.tags.sort((function(t,e){return t.tag_ordinary-e.tag_ordinary})),a("setWallet",e)},getWallet:function(t){return Object(We["a"])(regeneratorRuntime.mark((function e(){var a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.commit,n=t.getters,o=t.rootGetters,Ae("/api/wallet","get",{params:{wallet_id:n.getWalletId,time_choosen:o["calendar/getDate"].toISOString().split("Z")[0]}}).then((function(t){a("setWallet",t.data.data)})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},createWallet:function(t,e){return Object(We["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=t.dispatch,Ae("/api/wallet/create","post",{data:{wallet_name:null===e||void 0===e?void 0:e.wallet_name,wallet_description:null===e||void 0===e?void 0:e.wallet_description}}).then((function(){n("auth/getProfile",null,{root:!0})})).catch((function(t){console.log(t)}));case 2:case"end":return a.stop()}}),a)})))()},editWallet:function(t,e){return Object(We["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=t.dispatch,Ae("/api/wallet/edit","post",{data:{wallet_name:null===e||void 0===e?void 0:e.wallet_name,wallet_description:null===e||void 0===e?void 0:e.wallet_description,wallet_id:null===e||void 0===e?void 0:e.wallet_id}}).then((function(){n("auth/getProfile",null,{root:!0})})).catch((function(t){console.log(t)}));case 2:case"end":return a.stop()}}),a)})))()},deleteWallet:function(t){return Object(We["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.getters,n=t.dispatch,Ae("/api/wallet/delete","post",{data:{wallet_id:a.getWalletId}}).then((function(){n("auth/getProfile",null,{root:!0})})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},switchWallet:function(t,e){return Object(We["a"])(regeneratorRuntime.mark((function a(){var n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=t.rootGetters,o=t.dispatch,Ae("/api/wallet","get",{params:{wallet_id:e,time_choosen:n["calendar/getDate"].toISOString().split("Z")[0]}}).then((function(){o("auth/getProfile",null,{root:!0})})).catch((function(t){console.log(t)}));case 2:case"end":return a.stop()}}),a)})))()},createTag:function(t,e){return Object(We["a"])(regeneratorRuntime.mark((function a(){var n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=t.dispatch,o=t.getters,Ae("/api/tag/create","post",{data:{tag_wallet_id:o.getWalletId,tag_ordinary:o.getWalletTags("income").length+o.getWalletTags("expense").length+1,tag_name:null===e||void 0===e?void 0:e.tag_name,tag_type:null===e||void 0===e?void 0:e.tag_type,tag_color:null===e||void 0===e?void 0:e.tag_color}}).then((function(){n("auth/getProfile",null,{root:!0})})).catch((function(t){console.log(t)}));case 2:case"end":return a.stop()}}),a)})))()},editTag:function(t,e){return Object(We["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=t.dispatch,Ae("/api/tag/edit","post",{data:{tag_id:null===e||void 0===e?void 0:e.tag_id,tag_ordinary:null===e||void 0===e?void 0:e.tag_ordinary,tag_name:null===e||void 0===e?void 0:e.tag_name,tag_type:null===e||void 0===e?void 0:e.tag_type,tag_color:null===e||void 0===e?void 0:e.tag_color}}).then((function(){n("auth/getProfile",null,{root:!0})})).catch((function(t){console.log(t)}));case 2:case"end":return a.stop()}}),a)})))()},deleteTag:function(t,e){return Object(We["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=t.dispatch,Ae("/api/tag/delete","post",{data:{tag_id:e}}).then((function(){n("auth/getProfile",null,{root:!0})})).catch((function(t){console.log(t)}));case 2:case"end":return a.stop()}}),a)})))()},updateAllTags:function(t,e){return Object(We["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=t.dispatch,Ae("/api/tag/update","post",{data:{tags:e}}).then((function(){n("auth/getProfile",null,{root:!0})})).catch((function(t){console.log(t)}));case 2:case"end":return a.stop()}}),a)})))()}},getters:{getRecords:function(t){return t.wallet?t.wallet.records:[]},getWalletId:function(t){return t.wallet?t.wallet.wallet_id:""},getWalletInfo:function(t){return t.wallet?{wallet_id:t.wallet.wallet_id,wallet_total:t.wallet.wallet_total,wallet_name:t.wallet.wallet_name,wallet_description:t.wallet.wallet_description}:{}},getWalletTags:function(t){return function(e){return t.wallet?t.wallet.tags.filter((function(t){return t.tag_type==e})):[]}},getAllWalletTags:function(t){return t.wallet?t.wallet.tags:[]}}},ze=Fe,He={namespaced:!0,state:{modal:!1,data:{},mode:"create"},mutations:{setModal:function(t,e){t.modal=e},setMode:function(t,e){t.mode=e},setData:function(t,e){t.data=e}},actions:{openModal:function(t){var e=t.commit;e("setModal",!0)},closeModal:function(t){var e=t.commit;e("setModal",!1)},createMode:function(t){var e=t.commit;e("setMode","create")},editMode:function(t){var e=t.commit;e("setMode","edit")},setData:function(t,e){var a=t.commit;a("setData",e)},createRecord:function(t,e){return Object(We["a"])(regeneratorRuntime.mark((function a(){var n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=t.rootGetters,o=t.dispatch,Ae("/api/record/create","post",{data:{wallet_id:n["wallet/getWalletId"],wallet_record_tag_id:null===e||void 0===e?void 0:e.wallet_record_tag_id,record_ordinary:1,record_name:null===e||void 0===e?void 0:e.record_name,record_description:null===e||void 0===e?void 0:e.record_description,record_amount:("expense"==(null===e||void 0===e?void 0:e.record_type)?-1:1)*(null===e||void 0===e?void 0:e.record_amount),record_type:null===e||void 0===e?void 0:e.record_type,record_date:new Date(null===e||void 0===e?void 0:e.record_date).toISOString().split("Z")[0]}}).then((function(t){console.log(t.data),o("auth/getProfile",null,{root:!0})})).catch((function(t){console.log(t)})).then((function(){o("closeModal")}));case 2:case"end":return a.stop()}}),a)})))()},editRecord:function(t,e){return Object(We["a"])(regeneratorRuntime.mark((function a(){var n,o,r,i,l,c,s,d,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=t.rootGetters,o=t.getters,r=t.dispatch,i=o.getData,l=null===e||void 0===e?void 0:e.record_amount,c=null===i||void 0===i?void 0:i.record_amount,s="expense"==(null===e||void 0===e?void 0:e.record_type)?-1:1,d="expense"==(null===i||void 0===i?void 0:i.record_type)?-1:1,u=s*l-d*c,Ae("/api/record/edit","post",{data:{record_id:null===e||void 0===e?void 0:e.record_id,record_wallet_id:n["wallet/getWalletId"],wallet_record_tag_id:null===e||void 0===e?void 0:e.wallet_record_tag_id,record_ordinary:1,record_name:null===e||void 0===e?void 0:e.record_name,record_description:null===e||void 0===e?void 0:e.record_description,record_amount:null===e||void 0===e?void 0:e.record_amount,record_type:null===e||void 0===e?void 0:e.record_type,record_date:new Date(null===e||void 0===e?void 0:e.record_date).toISOString().split("Z")[0],record_amount_diff:u}}).then((function(t){console.log(t.data),r("auth/getProfile",null,{root:!0})})).catch((function(t){console.log(t)})).then((function(){r("closeModal")}));case 8:case"end":return a.stop()}}),a)})))()},deleteRecord:function(t,e){return Object(We["a"])(regeneratorRuntime.mark((function a(){var n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=t.rootGetters,o=t.dispatch,Ae("/api/record/delete","post",{data:{record_id:null===e||void 0===e?void 0:e.record_id,record_wallet_id:n["wallet/getWalletId"],record_amount:null===e||void 0===e?void 0:e.record_amount}}).then((function(t){console.log(t.data),o("auth/getProfile",null,{root:!0})})).catch((function(t){console.log(t)})).then((function(){o("closeModal")}));case 2:case"end":return a.stop()}}),a)})))()}},getters:{getModal:function(t){return t.modal},getMode:function(t){return t.mode},getData:function(t){return t.data}}},Ge=He;n["default"].use(l["a"]);var Ne=new l["a"].Store({modules:{auth:Pe,calendar:qe,wallet:ze,record:Ge}});n["default"].use(st["a"]);var Ze=[{path:"/",name:"Home",component:Vt,meta:{requiresAuth:!0}},{path:"/search",name:"Search",component:Rt},{path:"/chart",name:"Chart",component:Pt,meta:{requiresAuth:!0}},{path:"/setting",name:"Setting",component:me,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:we,meta:{requiresAuth:!1}},{path:"/callback/signup",name:"CallbackSignup",component:Te,meta:{requiresAuth:!1}},{path:"/callback/login",name:"CallbackLogin",component:Re,meta:{requiresAuth:!1}}],Je=new st["a"]({mode:"history",base:"/",routes:Ze});Je.beforeEach((function(t,e,a){var n=Ne.getters["auth/isLoggedin"];console.log(n),t.matched.some((function(t){return t.meta.requiresAuth}))?n?a():a({path:"/login"}):a()}));var Ue=Je,Ye=a("f309");n["default"].use(Ye["a"]);var Ke=new Ye["a"]({}),Qe=a("5887"),Xe=a.n(Qe);n["default"].use(Xe.a,{componentPrefix:"vc"}),n["default"].config.productionTip=!1,new n["default"]({router:Ue,store:Ne,vuetify:Ke,render:function(t){return t(ct)}}).$mount("#app")},"85ec":function(t,e,a){},"95a2":function(t,e,a){"use strict";a("b1aa")},b1aa:function(t,e,a){}});
//# sourceMappingURL=app.b0e2e7f5.js.map